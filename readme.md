![Web App Reference Architecture (10)](https://github.com/Millroy094/keycloak-cluster-aws-terraform/assets/58091953/8a22fd1d-e787-464b-bac7-77074b3170a8)![Web App Reference Architecture (11)](https://github.com/Millroy094/keycloak-cluster-aws-terraform/assets/58091953/f56093e6-b126-4b90-ad6f-a93467d6134b)### Keycloak cluster
The purpose of this repository is to experiment deploying a Keycloak instance on AWS ECS service using terraform for IaC, I am currently using Open Tofu which is a terraform fork for the Ioc. 

![Uploading Web App Reference Architec<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
  "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1280" height="720" viewBox="-1748.8888888888887 -419.9999999999999 3425.7777777777774 1926.9999999999998" id="ccdiagram"><filter id="grayscale"><feColorMatrix type="saturate" values="0"></feColorMatrix></filter><filter id="highlight"><feColorMatrix type="matrix" color-interpolation-filters="sRGB" values="0.20338 0 0 0 0
                0 0.58474 0 0 0
                0 0 0.97033 0 0
                0 0 0 1 0"></feColorMatrix></filter><defs><style type="text/css">@import url('https://fonts.googleapis.com/css?family=Open+Sans:400,700|Inconsolata:400');</style></defs><g><rect x="-1748.8888888888887" y="-419.9999999999999" width="3425.7777777777774" height="1926.9999999999998" fill="none" id="interactionLayer"></rect><g pointer-events="auto"></g><g pointer-events="auto"><g><g id="6f91aa85-cea6-49a6-b627-82c3e5a6ca79"><g><polygon points="64 -37, 384 148, 64 333, -256 148" fill="#ececed"></polygon><svg x="34" y="-143" overflow="visible"><g fill="#9e9e9e" fill-opacity="1" stroke="none" transform="scale(1.25) matrix(0.707 0.409 -0.707 0.409 0 0)"><path stroke="none" d="M144 93.924l-14.834 8.565v19.577l16.954 9.789 14.835-8.565-6.358-3.67-8.477 4.893-10.597-6.117V106.16l8.478-4.894z"></path><path stroke="none" d="M148.24 93.924v7.342l8.476 4.894v9.788l6.358 3.671v-17.13z"></path></g></svg><polygon points="-256 160, 64 345, 64 333, -256 148" fill="#d2d2d4" stroke="#83838a"></polygon><polygon points="64 345, 384 160, 384 148, 64 333" fill="#b8b8bb" stroke="#83838a"></polygon><polygon points="-256 167, 64 352, 64 345, -256 160" fill="#858585" stroke="#858585"></polygon><polygon points="64 352, 384 167, 384 160, 64 345" fill="#6b6b6b" stroke="#6b6b6b"></polygon><polygon points="64 -37, -256 148, -256 167, 64 352, 384 167, 384 148" fill="none" stroke="#000000" stroke-width="2"></polygon><svg x="74" y="6" overflow="visible"><clipPath id="clip-6f91aa85-cea6-49a6-b627-82c3e5a6ca79"><polygon points="-10 -43, 310 142, -10 327, -330 142"></polygon></clipPath><g clip-path="url(#clip-6f91aa85-cea6-49a6-b627-82c3e5a6ca79)" font-family="Open Sans" font-size="32pt" fill="#000000" font-weight="bold"><text stroke="#ffffff" stroke-width="4" transform="matrix(0.707 0.409 -0.707 0.409 0 0)"><tspan>keycloak-cluster</tspan></text><text transform="matrix(0.707 0.409 -0.707 0.409 0 0)"><tspan>keycloak-cluster</tspan></text></g></svg></g></g></g></g><g pointer-events="auto"><g><g id="sg-0930261d8b1dd3991"><g><g><polygon points="-96 1073, -32 1073, 480 777, 480 740, 288 629, 224 629, 32 740, -32 740, -192 648, -544 851, -544 888, -352 999, -224 999" stroke="#2196f3" stroke-width="8" fill="none"></polygon></g><g><polygon points="-192 648, -224 629, -448 759, -448 796" stroke="#2196f3" stroke-width="8" fill="#2196f3"></polygon><text font-family="Inconsolata" font-size="20pt" font-weight="bold" fill="#ffffff" transform="translate(-239 665) matrix(0.707 -0.409 0.707 0.409 0 0)" text-anchor="end">keycloak-vpc-endpo...</text><g transform="translate(-224 638) matrix(0.707 0.409 -0.707 0.409 0 0)"><svg width="23" height="32" style="fill: rgb(255, 255, 255);"><svg xmlns="http://www.w3.org/2000/svg" width="23" height="32" viewBox="0 0 23 32"><path d="M19.429 17.143V5.714h-8v20.304c.911-.482 2.375-1.321 3.804-2.446 1.911-1.5 4.196-3.839 4.196-6.429zm3.428-13.714v13.714c0 7.518-10.518 12.268-10.964 12.464a1.049 1.049 0 0 1-.928 0C10.519 29.411.001 24.661.001 17.143V3.429c0-.625.518-1.143 1.143-1.143h20.571c.625 0 1.143.518 1.143 1.143z"></path></svg></svg></g></g></g></g></g><g><g id="sg-06b4e25db8228b13b"><g><g><polygon points="-384 537, -320 537, -128 426, -128 389, -352 259, -576 389, -576 426" stroke="#03a9f4" stroke-width="8" fill="none"></polygon></g><g><polygon points="-352 259, -384 241, -576 352, -576 389" stroke="#03a9f4" stroke-width="8" fill="#03a9f4"></polygon><text font-family="Inconsolata" font-size="20pt" font-weight="bold" fill="#ffffff" transform="translate(-399 276) matrix(0.707 -0.409 0.707 0.409 0 0)" text-anchor="end">rds-security-g...</text><g transform="translate(-384 250) matrix(0.707 0.409 -0.707 0.409 0 0)"><svg width="23" height="32" style="fill: rgb(255, 255, 255);"><svg xmlns="http://www.w3.org/2000/svg" width="23" height="32" viewBox="0 0 23 32"><path d="M19.429 17.143V5.714h-8v20.304c.911-.482 2.375-1.321 3.804-2.446 1.911-1.5 4.196-3.839 4.196-6.429zm3.428-13.714v13.714c0 7.518-10.518 12.268-10.964 12.464a1.049 1.049 0 0 1-.928 0C10.519 29.411.001 24.661.001 17.143V3.429c0-.625.518-1.143 1.143-1.143h20.571c.625 0 1.143.518 1.143 1.143z"></path></svg></svg></g></g></g></g></g><g><g id="sg-05b3f43d006912a8a"></g></g><g><g id="sg-00b5bf618ec31ae2f"><g><g><polygon points="512 537, 576 537, 768 426, 768 389, 544 259, 320 389, 320 426" stroke="#9e9e9e" stroke-width="8" fill="none"></polygon></g><g><polygon points="544 259, 512 241, 320 352, 320 389" stroke="#9e9e9e" stroke-width="8" fill="#9e9e9e"></polygon><text font-family="Inconsolata" font-size="20pt" font-weight="bold" fill="#ffffff" transform="translate(497 276) matrix(0.707 -0.409 0.707 0.409 0 0)" text-anchor="end">keycloak-alb-sg</text><g transform="translate(512 250) matrix(0.707 0.409 -0.707 0.409 0 0)"><svg width="23" height="32" style="fill: rgb(255, 255, 255);"><svg xmlns="http://www.w3.org/2000/svg" width="23" height="32" viewBox="0 0 23 32"><path d="M19.429 17.143V5.714h-8v20.304c.911-.482 2.375-1.321 3.804-2.446 1.911-1.5 4.196-3.839 4.196-6.429zm3.428-13.714v13.714c0 7.518-10.518 12.268-10.964 12.464a1.049 1.049 0 0 1-.928 0C10.519 29.411.001 24.661.001 17.143V3.429c0-.625.518-1.143 1.143-1.143h20.571c.625 0 1.143.518 1.143 1.143z"></path></svg></svg></g></g></g></g></g></g><g></g><g pointer-events="auto"><g><g id="vpc-02090d59cdd3422d8"><g><g><polygon points="-104 1475, 1560 513, 32 -370, -1632 592" stroke="#ffa000" stroke-width="8" fill="none"></polygon></g><g><polygon points="32 -370, 0 -388, -224 -259, -224 -222" stroke="#ffa000" stroke-width="8" fill="#ffa000"></polygon><text font-family="Inconsolata" font-size="20pt" font-weight="bold" fill="#ffffff" transform="translate(-8 -357) matrix(0.707 -0.409 0.707 0.409 0 0)" text-anchor="end">Keycloak VPC</text><g transform="translate(0 -384) matrix(0.707 0.409 -0.707 0.409 0 0)"><svg width="34" height="32" style="fill: rgb(255, 255, 255);"><svg xmlns="http://www.w3.org/2000/svg" width="34" height="32" viewBox="0 0 34 32"><path d="M34.286 20.571a6.858 6.858 0 0 1-6.857 6.857H8c-4.411 0-8-3.589-8-8a7.993 7.993 0 0 1 4.607-7.232c-.018-.25-.036-.518-.036-.768a9.137 9.137 0 0 1 9.143-9.143c3.821 0 7.089 2.339 8.464 5.679a4.439 4.439 0 0 1 2.964-1.107 4.58 4.58 0 0 1 4.571 4.571 4.49 4.49 0 0 1-.732 2.464c3.036.714 5.304 3.429 5.304 6.679z"></path></svg></svg></g></g></g></g></g></g><g></g><g pointer-events="auto"><g><g id="subnet-04d11f4d43902b3aa"><g><g><polygon transform="translate(64,-240) matrix(-0.707 -0.409 0.707 -0.409 0 0)" points="-1673.325 -1944.675, -1673.325 0, 0 0, 0 -1944.675" stroke-width="11.2" stroke="#4caf50" stroke-dasharray="16" fill="none"></polygon></g><g><polygon points="64 -240, 32 -259, -192 -129, -192 -92" stroke="#4caf50" stroke-width="8" fill="#4caf50"></polygon><text font-family="Inconsolata" font-size="20pt" font-weight="bold" fill="#ffffff" transform="translate(15 -223) matrix(0.707 -0.409 0.707 0.409 0 0)" text-anchor="end">Keycloak ECS Subnet</text><g transform="translate(32 -249) matrix(0.707 0.409 -0.707 0.409 0 0)"><svg width="21" height="32" style="fill: rgb(255, 255, 255);"><svg xmlns="http://www.w3.org/2000/svg" width="21" height="32" viewBox="0 0 21 32"><path d="M5.714 13.714h9.143v-3.429c0-2.518-2.054-4.571-4.571-4.571s-4.571 2.054-4.571 4.571v3.429zm14.857 1.715v10.286c0 .946-.768 1.714-1.714 1.714H1.714A1.715 1.715 0 0 1 0 25.715V15.429c0-.946.768-1.714 1.714-1.714h.571v-3.429c0-4.393 3.607-8 8-8s8 3.607 8 8v3.429h.571c.946 0 1.714.768 1.714 1.714z"></path></svg></svg></g></g></g></g></g><g><g id="subnet-0cb78dc15bfdf00fe"><g><g><polygon transform="translate(64,-240) matrix(-0.707 -0.409 0.707 -0.409 0 0)" points="-1673.325 -1944.675, -1673.325 0, 0 0, 0 -1944.675" stroke-width="11.2" stroke="#4caf50" stroke-dasharray="16" fill="none"></polygon></g><g><polygon points="64 -240, 32 -259, -192 -129, -192 -92" stroke="#4caf50" stroke-width="8" fill="#4caf50"></polygon><text font-family="Inconsolata" font-size="20pt" font-weight="bold" fill="#ffffff" transform="translate(15 -223) matrix(0.707 -0.409 0.707 0.409 0 0)" text-anchor="end">Keycloak ECS Subnet</text><g transform="translate(32 -249) matrix(0.707 0.409 -0.707 0.409 0 0)"><svg width="21" height="32" style="fill: rgb(255, 255, 255);"><svg xmlns="http://www.w3.org/2000/svg" width="21" height="32" viewBox="0 0 21 32"><path d="M5.714 13.714h9.143v-3.429c0-2.518-2.054-4.571-4.571-4.571s-4.571 2.054-4.571 4.571v3.429zm14.857 1.715v10.286c0 .946-.768 1.714-1.714 1.714H1.714A1.715 1.715 0 0 1 0 25.715V15.429c0-.946.768-1.714 1.714-1.714h.571v-3.429c0-4.393 3.607-8 8-8s8 3.607 8 8v3.429h.571c.946 0 1.714.768 1.714 1.714z"></path></svg></svg></g></g></g></g></g><g><g id="subnet-07c4ae165faf287fd"><g><g><polygon transform="translate(544,148) matrix(-0.707 -0.409 0.707 -0.409 0 0)" points="-633.15 -633.15, -633.15 0, 0 0, 0 -633.15" stroke-width="11.2" stroke="#9e9e9e" stroke-dasharray="16" fill="none"></polygon></g><g><polygon points="544 148, 512 130, 288 259, 288 296" stroke="#9e9e9e" stroke-width="8" fill="#9e9e9e"></polygon><text font-family="Inconsolata" font-size="20pt" font-weight="bold" fill="#ffffff" transform="translate(500 163) matrix(0.707 -0.409 0.707 0.409 0 0)" text-anchor="end">Keycloak load bala...</text><g transform="translate(512 137) matrix(0.707 0.409 -0.707 0.409 0 0)"><svg width="27" height="32" style="fill: rgb(255, 255, 255);"><svg xmlns="http://www.w3.org/2000/svg" width="27" height="32" viewBox="0 0 27 32"><path d="M13.714 2.286c7.571 0 13.714 6.143 13.714 13.714s-6.143 13.714-13.714 13.714S0 23.571 0 16 6.143 2.286 13.714 2.286zm4.893 9.303c-.143.107-.232.304-.411.339.089-.018.179-.339.232-.411.107-.125.25-.196.393-.268.304-.125.607-.161.929-.214.304-.071.679-.071.911.196-.054-.054.375-.429.429-.446.161-.089.429-.054.536-.214.036-.054.036-.393.036-.393-.304.036-.411-.25-.429-.5 0 .018-.036.071-.107.143.018-.268-.321-.071-.446-.107-.411-.107-.357-.393-.482-.696-.071-.161-.268-.214-.339-.375-.071-.107-.107-.339-.268-.357-.107-.018-.304.375-.339.357-.161-.089-.232.036-.357.107-.107.071-.196.036-.304.089.321-.107-.143-.286-.304-.25.25-.071.125-.339-.018-.464h.089c-.036-.161-.536-.304-.696-.411s-1.018-.286-1.196-.179c-.214.125.054.482.054.661.018.214-.214.268-.214.446 0 .304.571.25.429.661-.089.25-.429.304-.571.5-.143.179.018.5.161.625.143.107-.25.286-.304.321-.304.143-.536-.304-.607-.571-.054-.196-.071-.429-.286-.536-.107-.036-.446-.089-.518.018-.107-.268-.482-.375-.732-.464-.357-.125-.661-.125-1.036-.071.125-.018-.036-.571-.339-.482.089-.179.054-.375.089-.554.036-.143.107-.286.214-.411.036-.071.429-.482.304-.5.304.036.643.054.893-.196.161-.161.232-.429.393-.607.232-.268.518.071.768.089.357.018.339-.375.143-.554.232.018.036-.411-.089-.464-.161-.054-.768.107-.446.232-.071-.036-.5.857-.75.411-.071-.089-.107-.464-.268-.482-.143 0-.232.161-.286.268.089-.232-.5-.393-.625-.411.268-.179.054-.375-.143-.482-.143-.089-.589-.161-.714-.018-.339.411.357.464.536.571.054.036.268.161.143.25-.107.054-.429.143-.464.214-.107.161.125.339-.036.5-.161-.161-.161-.429-.286-.607.161.196-.643.089-.625.089-.268 0-.696.179-.893-.089-.036-.071-.036-.482.071-.393-.161-.125-.268-.25-.375-.321-.589.196-1.143.446-1.679.732a.302.302 0 0 0 .214-.018c.143-.054.268-.143.411-.214.179-.071.554-.286.75-.125.018-.036.071-.071.089-.089.125.143.25.286.357.446-.143-.071-.375-.036-.536-.018-.125.036-.339.071-.393.214.054.089.125.232.089.321-.232-.161-.411-.429-.732-.464-.143 0-.286 0-.393.018a11.598 11.598 0 0 0-4.196 3.964.506.506 0 0 0 .214.143c.179.054 0 .571.339.304.107.089.125.214.054.339.018-.018.732.446.786.482.125.107.321.232.375.375.036.125-.071.268-.179.321-.018-.036-.286-.304-.321-.232-.054.089 0 .571.196.554-.286.018-.161 1.125-.232 1.339 0 .018.036.018.036.018-.054.214.125 1.054.482.964-.232.054.411.875.5.929.232.161.5.268.661.5.179.25.179.625.429.821-.071.214.375.464.357.768-.036.018-.054.018-.089.036.089.25.429.25.554.482.071.143 0 .482.232.411.036-.393-.232-.786-.429-1.107-.107-.179-.214-.339-.304-.518-.089-.161-.107-.357-.179-.536.071.018.464.161.429.214-.143.357.571.982.768 1.214.054.054.464.589.25.589.232 0 .554.357.661.536.161.268.125.607.232.893.107.357.607.518.893.679.25.125.464.304.714.393.375.143.464.018.786-.036.464-.071.518.446.893.643.232.125.732.304.982.196-.107.036.375.768.411.821.161.214.464.321.643.536a.283.283 0 0 0 .125-.161c-.071.196.268.571.446.536.196-.036.25-.429.25-.571-.357.179-.679.036-.875-.321-.036-.089-.321-.589-.071-.589.339 0 .107-.268.071-.518s-.286-.411-.411-.625c-.107.214-.464.161-.571-.018 0 .054-.054.143-.054.214-.089 0-.179.018-.268-.018.036-.214.054-.482.107-.714.089-.321.679-.946-.089-.911-.268.018-.375.125-.464.357-.089.214-.054.411-.304.518-.161.071-.696.036-.857-.054-.339-.196-.571-.821-.571-1.179-.018-.482.232-.911 0-1.357.107-.089.214-.268.339-.357.107-.071.232.054.286-.161-.054-.036-.125-.107-.143-.107.268.125.768-.179 1 0 .143.107.304.143.393-.036.018-.054-.125-.268-.054-.411.054.304.25.357.518.161.107.107.393.071.589.179.196.125.232.321.464.054.143.214.161.214.214.429.054.196.161.696.339.786.375.232.286-.393.25-.607-.018-.018-.018-.607-.036-.607-.571-.125-.357-.571-.036-.875.054-.036.464-.179.643-.321.161-.143.357-.393.268-.625.089 0 .161-.071.196-.161-.054-.018-.268-.196-.304-.179.125-.071.107-.179.036-.286.179-.107.089-.304.268-.375.196.268.589-.036.393-.25.179-.25.589-.125.696-.357.268.071.071-.268.214-.464.125-.161.339-.161.5-.25 0 .018.446-.25.304-.268.304.036.911-.286.446-.554.071-.161-.161-.232-.321-.268.125-.036.286.036.393-.036.232-.161.071-.232-.125-.286-.25-.071-.571.089-.768.214zM15.696 27.25a11.341 11.341 0 0 0 6.268-3.375c-.107-.107-.304-.071-.446-.143-.143-.054-.25-.107-.429-.143.036-.357-.357-.482-.607-.661-.232-.179-.375-.375-.714-.304-.036.018-.393.143-.321.214-.232-.196-.339-.304-.643-.393-.286-.089-.482-.446-.768-.125-.143.143-.071.357-.143.5-.232-.196.214-.429.036-.643-.214-.25-.589.161-.768.268-.107.089-.232.125-.304.232-.089.125-.125.286-.196.411-.054-.143-.357-.107-.375-.214.071.429.071.875.161 1.304.054.25 0 .661-.214.857s-.482.411-.518.714c-.036.214.018.411.214.464.018.268-.286.464-.268.75 0 .018.018.196.036.286z"></path></svg></svg></g></g></g></g></g><g><g id="subnet-00b6a9bcf31a243a5"><g><g><polygon transform="translate(-352,148) matrix(-0.707 -0.409 0.707 -0.409 0 0)" points="-633.15 -633.15, -633.15 0, 0 0, 0 -633.15" stroke-width="11.2" stroke="#00bcd4" stroke-dasharray="16" fill="none"></polygon></g><g><polygon points="-352 148, -384 130, -608 259, -608 296" stroke="#00bcd4" stroke-width="8" fill="#00bcd4"></polygon><text font-family="Inconsolata" font-size="20pt" font-weight="bold" fill="#ffffff" transform="translate(-401 166) matrix(0.707 -0.409 0.707 0.409 0 0)" text-anchor="end">Keycloak DB Subnet</text><g transform="translate(-384 139) matrix(0.707 0.409 -0.707 0.409 0 0)"><svg width="21" height="32" style="fill: rgb(255, 255, 255);"><svg xmlns="http://www.w3.org/2000/svg" width="21" height="32" viewBox="0 0 21 32"><path d="M5.714 13.714h9.143v-3.429c0-2.518-2.054-4.571-4.571-4.571s-4.571 2.054-4.571 4.571v3.429zm14.857 1.715v10.286c0 .946-.768 1.714-1.714 1.714H1.714A1.715 1.715 0 0 1 0 25.715V15.429c0-.946.768-1.714 1.714-1.714h.571v-3.429c0-4.393 3.607-8 8-8s8 3.607 8 8v3.429h.571c.946 0 1.714.768 1.714 1.714z"></path></svg></svg></g></g></g></g></g><g><g id="subnet-0d05c064273b0b3b5"><g><g><polygon transform="translate(544,148) matrix(-0.707 -0.409 0.707 -0.409 0 0)" points="-633.15 -633.15, -633.15 0, 0 0, 0 -633.15" stroke-width="11.2" stroke="#00bcd4" stroke-dasharray="16" fill="none"></polygon></g><g><polygon points="544 148, 512 130, 288 259, 288 296" stroke="#00bcd4" stroke-width="8" fill="#00bcd4"></polygon><text font-family="Inconsolata" font-size="20pt" font-weight="bold" fill="#ffffff" transform="translate(500 163) matrix(0.707 -0.409 0.707 0.409 0 0)" text-anchor="end">Keycloak load bala...</text><g transform="translate(512 137) matrix(0.707 0.409 -0.707 0.409 0 0)"><svg width="27" height="32" style="fill: rgb(255, 255, 255);"><svg xmlns="http://www.w3.org/2000/svg" width="27" height="32" viewBox="0 0 27 32"><path d="M13.714 2.286c7.571 0 13.714 6.143 13.714 13.714s-6.143 13.714-13.714 13.714S0 23.571 0 16 6.143 2.286 13.714 2.286zm4.893 9.303c-.143.107-.232.304-.411.339.089-.018.179-.339.232-.411.107-.125.25-.196.393-.268.304-.125.607-.161.929-.214.304-.071.679-.071.911.196-.054-.054.375-.429.429-.446.161-.089.429-.054.536-.214.036-.054.036-.393.036-.393-.304.036-.411-.25-.429-.5 0 .018-.036.071-.107.143.018-.268-.321-.071-.446-.107-.411-.107-.357-.393-.482-.696-.071-.161-.268-.214-.339-.375-.071-.107-.107-.339-.268-.357-.107-.018-.304.375-.339.357-.161-.089-.232.036-.357.107-.107.071-.196.036-.304.089.321-.107-.143-.286-.304-.25.25-.071.125-.339-.018-.464h.089c-.036-.161-.536-.304-.696-.411s-1.018-.286-1.196-.179c-.214.125.054.482.054.661.018.214-.214.268-.214.446 0 .304.571.25.429.661-.089.25-.429.304-.571.5-.143.179.018.5.161.625.143.107-.25.286-.304.321-.304.143-.536-.304-.607-.571-.054-.196-.071-.429-.286-.536-.107-.036-.446-.089-.518.018-.107-.268-.482-.375-.732-.464-.357-.125-.661-.125-1.036-.071.125-.018-.036-.571-.339-.482.089-.179.054-.375.089-.554.036-.143.107-.286.214-.411.036-.071.429-.482.304-.5.304.036.643.054.893-.196.161-.161.232-.429.393-.607.232-.268.518.071.768.089.357.018.339-.375.143-.554.232.018.036-.411-.089-.464-.161-.054-.768.107-.446.232-.071-.036-.5.857-.75.411-.071-.089-.107-.464-.268-.482-.143 0-.232.161-.286.268.089-.232-.5-.393-.625-.411.268-.179.054-.375-.143-.482-.143-.089-.589-.161-.714-.018-.339.411.357.464.536.571.054.036.268.161.143.25-.107.054-.429.143-.464.214-.107.161.125.339-.036.5-.161-.161-.161-.429-.286-.607.161.196-.643.089-.625.089-.268 0-.696.179-.893-.089-.036-.071-.036-.482.071-.393-.161-.125-.268-.25-.375-.321-.589.196-1.143.446-1.679.732a.302.302 0 0 0 .214-.018c.143-.054.268-.143.411-.214.179-.071.554-.286.75-.125.018-.036.071-.071.089-.089.125.143.25.286.357.446-.143-.071-.375-.036-.536-.018-.125.036-.339.071-.393.214.054.089.125.232.089.321-.232-.161-.411-.429-.732-.464-.143 0-.286 0-.393.018a11.598 11.598 0 0 0-4.196 3.964.506.506 0 0 0 .214.143c.179.054 0 .571.339.304.107.089.125.214.054.339.018-.018.732.446.786.482.125.107.321.232.375.375.036.125-.071.268-.179.321-.018-.036-.286-.304-.321-.232-.054.089 0 .571.196.554-.286.018-.161 1.125-.232 1.339 0 .018.036.018.036.018-.054.214.125 1.054.482.964-.232.054.411.875.5.929.232.161.5.268.661.5.179.25.179.625.429.821-.071.214.375.464.357.768-.036.018-.054.018-.089.036.089.25.429.25.554.482.071.143 0 .482.232.411.036-.393-.232-.786-.429-1.107-.107-.179-.214-.339-.304-.518-.089-.161-.107-.357-.179-.536.071.018.464.161.429.214-.143.357.571.982.768 1.214.054.054.464.589.25.589.232 0 .554.357.661.536.161.268.125.607.232.893.107.357.607.518.893.679.25.125.464.304.714.393.375.143.464.018.786-.036.464-.071.518.446.893.643.232.125.732.304.982.196-.107.036.375.768.411.821.161.214.464.321.643.536a.283.283 0 0 0 .125-.161c-.071.196.268.571.446.536.196-.036.25-.429.25-.571-.357.179-.679.036-.875-.321-.036-.089-.321-.589-.071-.589.339 0 .107-.268.071-.518s-.286-.411-.411-.625c-.107.214-.464.161-.571-.018 0 .054-.054.143-.054.214-.089 0-.179.018-.268-.018.036-.214.054-.482.107-.714.089-.321.679-.946-.089-.911-.268.018-.375.125-.464.357-.089.214-.054.411-.304.518-.161.071-.696.036-.857-.054-.339-.196-.571-.821-.571-1.179-.018-.482.232-.911 0-1.357.107-.089.214-.268.339-.357.107-.071.232.054.286-.161-.054-.036-.125-.107-.143-.107.268.125.768-.179 1 0 .143.107.304.143.393-.036.018-.054-.125-.268-.054-.411.054.304.25.357.518.161.107.107.393.071.589.179.196.125.232.321.464.054.143.214.161.214.214.429.054.196.161.696.339.786.375.232.286-.393.25-.607-.018-.018-.018-.607-.036-.607-.571-.125-.357-.571-.036-.875.054-.036.464-.179.643-.321.161-.143.357-.393.268-.625.089 0 .161-.071.196-.161-.054-.018-.268-.196-.304-.179.125-.071.107-.179.036-.286.179-.107.089-.304.268-.375.196.268.589-.036.393-.25.179-.25.589-.125.696-.357.268.071.071-.268.214-.464.125-.161.339-.161.5-.25 0 .018.446-.25.304-.268.304.036.911-.286.446-.554.071-.161-.161-.232-.321-.268.125-.036.286.036.393-.036.232-.161.071-.232-.125-.286-.25-.071-.571.089-.768.214zM15.696 27.25a11.341 11.341 0 0 0 6.268-3.375c-.107-.107-.304-.071-.446-.143-.143-.054-.25-.107-.429-.143.036-.357-.357-.482-.607-.661-.232-.179-.375-.375-.714-.304-.036.018-.393.143-.321.214-.232-.196-.339-.304-.643-.393-.286-.089-.482-.446-.768-.125-.143.143-.071.357-.143.5-.232-.196.214-.429.036-.643-.214-.25-.589.161-.768.268-.107.089-.232.125-.304.232-.089.125-.125.286-.196.411-.054-.143-.357-.107-.375-.214.071.429.071.875.161 1.304.054.25 0 .661-.214.857s-.482.411-.518.714c-.036.214.018.411.214.464.018.268-.286.464-.268.75 0 .018.018.196.036.286z"></path></svg></svg></g></g></g></g></g><g><g id="subnet-09068ad77567e6bfb"><g><g><polygon transform="translate(-352,148) matrix(-0.707 -0.409 0.707 -0.409 0 0)" points="-633.15 -633.15, -633.15 0, 0 0, 0 -633.15" stroke-width="11.2" stroke="#00bcd4" stroke-dasharray="16" fill="none"></polygon></g><g><polygon points="-352 148, -384 130, -608 259, -608 296" stroke="#00bcd4" stroke-width="8" fill="#00bcd4"></polygon><text font-family="Inconsolata" font-size="20pt" font-weight="bold" fill="#ffffff" transform="translate(-401 166) matrix(0.707 -0.409 0.707 0.409 0 0)" text-anchor="end">Keycloak DB Subnet</text><g transform="translate(-384 139) matrix(0.707 0.409 -0.707 0.409 0 0)"><svg width="21" height="32" style="fill: rgb(255, 255, 255);"><svg xmlns="http://www.w3.org/2000/svg" width="21" height="32" viewBox="0 0 21 32"><path d="M5.714 13.714h9.143v-3.429c0-2.518-2.054-4.571-4.571-4.571s-4.571 2.054-4.571 4.571v3.429zm14.857 1.715v10.286c0 .946-.768 1.714-1.714 1.714H1.714A1.715 1.715 0 0 1 0 25.715V15.429c0-.946.768-1.714 1.714-1.714h.571v-3.429c0-4.393 3.607-8 8-8s8 3.607 8 8v3.429h.571c.946 0 1.714.768 1.714 1.714z"></path></svg></svg></g></g></g></g></g></g><g pointer-events="auto"><g><g id="b9c22054-c771-4e13-a726-101a08e3116a"><g><polygon points="64 37, 256 148, 64 259, -128 148" fill="#000000" opacity="0.5"></polygon><polygon points="64 19, 256 130, 64 241, -128 130" fill="#fff"></polygon><polygon points="-128 139, 64 250, 64 241, -128 130" fill="#49298a" stroke="#999"></polygon><polygon points="64 250, 256 139, 256 130, 64 241" fill="#341d63" stroke="#999"></polygon><polygon points="64 19, -128 130, -128 139, 64 250, 256 139, 256 130" fill="none" stroke="#000000" stroke-width="2"></polygon><svg x="45" y="37" overflow="visible"><clipPath id="clip-b9c22054-c771-4e13-a726-101a08e3116a"><polygon points="19 -18, 205 89, 13 200, -173 93"></polygon></clipPath><g clip-path="url(#clip-b9c22054-c771-4e13-a726-101a08e3116a)" font-family="Open Sans" font-size="25pt" fill="#000000" font-weight="bold"><text stroke="#ffffff" stroke-width="4" transform="matrix(0.707 0.409 -0.707 0.409 0 0)"><tspan>keycloak-service</tspan></text><text transform="matrix(0.707 0.409 -0.707 0.409 0 0)"><tspan>keycloak-service</tspan></text></g></svg></g></g></g></g><g pointer-events="none"></g><g pointer-events="auto"><g id="c647bfac-6bee-42e8-b14b-9b485d10e3d4-b9c22054-c771-4e13-a726-101a08e3116a"><g cursor="cell"><line x1="496" y1="379" x2="162" y2="204" stroke="red" stroke-width="8" opacity="0"></line><line x1="496" y1="379" x2="162" y2="204" stroke="#000000" stroke-width="2" stroke-linecap="round"></line><polygon points="152 199, 163 213, 165 206, 178 204, 152 199" stroke-linejoin="round" fill="#000000" stroke="#000000" stroke-width="1"></polygon></g></g></g><g pointer-events="auto"><g><g id="c647bfac-6bee-42e8-b14b-9b485d10e3d4"><svg x="496" y="342" width="97" height="94" fill-rule="evenodd" stroke-miterlimit="1"><path fill="#ececed" d="M0 18.6v18.6l32.333 18.6h32.334L97 37.2V18.6L64.667 0H32.333L0 18.6Z"></path><path fill="#b8b8bb" d="M64.667 55.8 97 37.2v37.2L64.667 93V55.8Z"></path><path fill="#d2d2d4" d="M32.333 55.8h32.334V93H32.333V55.8ZM0 37.2v37.2L32.333 93V55.8L0 37.2Z"></path><path fill="none" stroke="#83838a" d="M.955 37.877 32.333 55.8h32.334l31.378-17.923M32.333 55.8v36.211M64.667 55.8v36.574" stroke-width="1.04"></path><path fill="#000000" d="M97 18.6v55.8L64.667 93H32.333L0 74.4V18.6L32.333 0h32.334L97 18.6ZM32.865 1.989 1.989 19.751v53.498l30.876 17.762h31.27l30.876-17.762V19.751L64.135 1.989h-31.27Z"></path><path fill="#4286c5" d="M69.912 15.583c11.818 6.798 11.818 17.836 0 24.635-11.817 6.798-31.007 6.798-42.824 0-11.818-6.799-11.818-17.837 0-24.635 11.817-6.799 31.007-6.799 42.824 0Z"></path><path fill="#ffffff" d="M49.584 14.774c1.824 1.049 1.824 2.753 0 3.802-1.824 1.05-4.786 1.05-6.61 0-1.824-1.049-1.824-2.753 0-3.802 1.824-1.05 4.786-1.05 6.61 0Zm10.867 6.251c1.825 1.049 1.825 2.753 0 3.803-1.824 1.049-4.786 1.049-6.61 0-1.824-1.05-1.824-2.754 0-3.803s4.786-1.049 6.61 0Zm10.868 6.251c1.824 1.05 1.824 2.754 0 3.803-1.825 1.049-4.787 1.049-6.611 0-1.824-1.049-1.824-2.753 0-3.803 1.824-1.049 4.786-1.049 6.611 0Zm-32.822 6.378c1.824 1.05 1.824 2.754 0 3.803-1.825 1.05-4.787 1.05-6.611 0-1.824-1.049-1.824-2.753 0-3.803 1.824-1.049 4.786-1.049 6.611 0Z"></path><path fill="#ffffff" d="M47.458 15.878c.453.26.393.717-.133 1.02-.526.303-1.32.337-1.773.076-.452-.26-.392-.717.133-1.019.526-.303 1.321-.337 1.773-.077Z"></path><path fill="#4286c5" d="M48.111 15.621c1.012.582 1.012 1.526 0 2.108-1.011.582-2.653.582-3.664 0-1.012-.582-1.012-1.526 0-2.108 1.011-.582 2.653-.582 3.664 0Zm10.867 6.251c1.012.582 1.012 1.527 0 2.108-1.011.582-2.653.582-3.664 0-1.012-.581-1.012-1.526 0-2.108 1.011-.581 2.653-.581 3.664 0Zm10.868 6.252c1.011.581 1.011 1.526 0 2.108-1.012.582-2.654.582-3.665 0-1.011-.582-1.011-1.527 0-2.108 1.011-.582 2.653-.582 3.665 0Z"></path><path fill="#ffffff" d="M37.024 34.502c1.011.582 1.011 1.526 0 2.108-1.012.582-2.654.582-3.665 0-1.011-.582-1.011-1.526 0-2.108 1.011-.582 2.653-.582 3.665 0Zm15.277-9.33L37.719 33.56l.482.834 14.584-8.388-.484-.834Z"></path><path fill="#ffffff" stroke="#ffffff" d="m46.993 26.089 6.654-1.146-4.324 5.168c.189-1.691-.757-3.313-2.33-4.022Z" stroke-width=".36"></path><path fill="#ffffff" d="m43.488 19.937-6.057 13.797.886.387 6.056-13.798-.885-.386Z"></path><path fill="#ffffff" stroke="#ffffff" d="m39.76 23.812 4.676-4.854-.405 6.716c-.855-1.474-2.582-2.221-4.271-1.862Z" stroke-width=".36"></path><path fill="#ffffff" d="m61.953 30.061-23.985 3.483.14.955 23.985-3.486-.14-.952Z"></path><path fill="#ffffff" stroke="#ffffff" d="m56.68 28.957 6.608 1.387-5.936 3.209c.804-1.503.526-3.358-.672-4.596Z" stroke-width=".36"></path><path fill="#ffffff" stroke="#ffffff" d="m37.96 33.977 13.12-7.547m-13.207 7.497 5.792-13.134m-5.628 13.229 22.478-3.281" stroke-width="1.93"></path></svg></g></g><g><g id="7972bc72-2b5a-4e2b-9178-766d86a57864"><svg x="11" y="80" width="106.128" height="80.616" viewBox="0 0 28.08 21.33"><path fill="#232323" stroke="#000" d="M.265 10.053v4.894l10.596 6.118v-4.894zm10.596 6.118h6.358v4.894h-6.358z" stroke-width=".265"></path><path fill="#090909" stroke="#000" d="m17.219 21.065 10.596-6.118v-4.894l-10.596 6.118z" stroke-width=".265"></path><path fill="#3c3c3c" stroke="#000" d="M27.815 10.053v-3.67L17.219.265h-6.358L.264 6.382v3.671l10.597 6.118h6.358z" stroke-width=".265"></path><path fill="none" stroke="#000000" d="m.265 14.947 10.596 6.118h6.358l10.596-6.118V6.383L17.219.265h-6.358L.264 6.383Z" stroke-width=".529"></path><g fill="#ff9800"><path d="m11.211 2.617.666.385-6.87 3.967-.667-.385zm1.872 1.081.666.385-6.871 3.966-.666-.384zm8.12 4.688.666.384-6.871 3.967-.666-.385zm1.871 1.08.666.385-6.87 3.967-.667-.385zM13.48 10.8 9.57 8.543a.796.46 0 0 1 0-.65l3.91-2.258a.796.46 0 0 1 1.126 0l3.91 2.258a.796.46 0 0 1 0 .65l-3.91 2.257a.796.46 0 0 1-1.126 0zm-3.14-2.582 3.703 2.138 3.704-2.138-3.704-2.139z"></path><path d="m14.958 5.142.666.385-.936.54-.666-.385zm1.249.721.666.385-.936.54-.666-.385zm1.249.721.666.385-.936.54-.666-.385zm1.249.721.666.385-.936.54-.666-.385zm-9.053.9.667.385-.936.54-.667-.385zm1.25.721.665.385-.935.54-.667-.385zm1.248.721.666.385-.936.54-.666-.385zm1.25.721.665.385-.936.54-.666-.385z"></path><path d="m13.126 5.142.936.54-.666.385-.936-.54zm-1.249.721.936.54-.666.385-.936-.54zm-1.249.721.936.54-.666.385-.936-.54zm-1.249.721.936.54-.666.385-.936-.54zm9.053.9.935.54-.666.385-.936-.54zm-1.25.721.936.54-.666.385-.936-.54zm-1.248.721.936.54-.667.385-.936-.54zm-1.25.721.937.54-.667.385-.935-.54z"></path></g></svg></g></g><g><g id="72841374-5d1f-49d8-869a-e06868c48db7"><svg x="578" y="798" width="123" height="108.05" viewBox="0 0 32.544 28.588"><path fill="#b8b8bb" stroke="#83838a" d="M10.115 6.02v14.218l7.873-4.317V1.475z" fill-rule="evenodd" stroke-linejoin="round" stroke-width=".268"></path><path fill="#d2d2d4" stroke="#83838a" d="m.265 2.228 9.85 3.792v14.218l-9.85-8.53z" fill-rule="evenodd" stroke-linejoin="round" stroke-width=".265"></path><path fill="#ececed" stroke="#83838a" d="m10.115 6.02 7.873-4.545L3.548.332.265 2.228z" fill-rule="evenodd" stroke-linejoin="round" stroke-width=".265"></path><path fill="none" stroke="#000000" d="m.265 11.707 9.85 8.531 7.873-4.317V1.475L3.392.271.265 2.077z" stroke-width=".529"></path><path fill="#ececed" stroke="#83838a" d="m22.429 3.65-8.208 4.74 14.827 10.397 3.231-1.865z" fill-rule="evenodd" stroke-width=".268"></path><path fill="#d2d2d4" stroke="#83838a" d="M14.22 8.391v14.218l14.777 5.687.051-9.509z" fill-rule="evenodd" stroke-width=".265"></path><path fill="#b8b8bb" stroke="#83838a" d="m29.048 18.787 3.231-1.865V26.4l-3.282 1.897z" fill-rule="evenodd" stroke-width=".265"></path><path fill="none" stroke="#000000" d="m22.429 3.65-8.208 4.74v14.22l14.776 5.686 3.282-1.896v-9.478z" stroke-width=".529"></path><path fill="#4286c5" d="M25.604 20.872c-.071-.975-.928-2.116-1.982-2.598a2.547 2.547 0 0 0-.398-.145c-.566-.909-1.446-1.739-2.441-2.194-1.501-.688-2.76-.294-3.057.871-1.061-.091-1.77.532-1.77 1.598 0 1.436 1.271 3.18 2.84 3.898l5.961 2.73c1.411.645 2.555.121 2.555-1.17 0-1.004-.695-2.2-1.708-2.99zm-.847 3.38-5.961-2.73c-1.099-.502-1.988-1.723-1.988-2.728 0-.917.74-1.337 1.704-1.022v-.018c0-1.149 1.016-1.614 2.27-1.04.95.435 1.763 1.34 2.102 2.252.198-.065.456-.042.738.087.626.287 1.135.986 1.135 1.56a.657.657 0 0 1-.156.455c.052.018.105.041.156.065.94.43 1.704 1.478 1.704 2.339 0 .86-.763 1.21-1.704.78z"></path></svg></g></g><g><g id="0b831c7a-9eea-4e5e-8688-7c53993fad48"><svg x="-416" y="306" width="128" height="137.556" viewBox="0 0 33.867 36.395"><g fill="#4286c5" stroke-width=".265" font-family="sans-serif" font-size="3.175"><path fill="#d2d2d4" d="M.187 12.17v14.365l16.587 9.576-.002-14.363-4.146-7.183-8.292-4.788z"></path><path fill="#b8b8bb" d="m20.956 14.565 8.292-4.788 4.145 2.394.001 14.364-16.587 9.577.001-14.365z"></path><path fill="#ececed" d="m4.333 9.777 8.292 4.787h8.295l8.292-4.787v-4.79L20.92.202h-8.294L4.334 4.988zm8.524 4.788h8.293l-4.148 7.182z"></path><path fill="#d2d2d4" d="m4.393 4.806.002 4.789-4.148 2.393zm24.82 4.788-.001-4.788 4.146 7.182z"></path><path fill="none" stroke="#83838a" d="m208.47 90.288 4.345-4.346 4.346 8.693z" transform="matrix(.95417 .55084 -.95417 .55084 -100.053 -150.003)" stroke-linejoin="round" stroke-width=".264"></path><path fill="none" stroke="#83838a" d="m199.734 94.678 13.037 13.037h17.383L217.117 94.68l-8.692-4.347h-8.69zm13.085-8.75v-8.69h4.345l13.037 13.037.001 17.382-13.037-13.037zm-13.085 4.405h8.69l4.347-4.346v-8.69l-4.347-4.347h-8.69l-4.346 4.346v8.69z" transform="matrix(.95417 .55084 -.95417 .55084 -100.053 -150.003)" stroke-linejoin="round" stroke-width=".257"></path><path fill="none" stroke="#000000" d="m212.855 107.631-13.037-13.037-4.346-8.692v-8.69l4.346-4.347h8.69l8.692 4.346 13.038 13.038v17.383z" transform="matrix(.95417 .55084 -.95417 .55084 -100.053 -150.003)" stroke-width=".514"></path><g><path d="M202.697 81.337h.723q1.014 0 1.517-.397.503-.404.503-1.17 0-.772-.425-1.14-.418-.37-1.318-.37h-1zm4.961-1.645q0 1.673-1.049 2.559-1.041.886-2.97.886h-.942v3.685H200.5V76.46h3.31q1.885 0 2.863.816.985.807.985 2.416z" transform="matrix(.95417 .55084 -.95417 .55084 -100.053 -150.003)" font-family="Open Sans" font-size="14.515"></path></g></g></svg></g></g><g><g id="833c9c35-b8ff-4d56-a433-37d33e1fbb85"><svg x="211" y="733" width="90" height="52.6"><path fill="#ececed" d="M.72 25.956c.262-6.368 4.618-12.703 13.06-17.578 17.353-10.019 45.4-10.07 62.645-.113 8.46 4.884 12.748 11.27 12.874 17.69.13 6.668-4.23 13.374-13.07 18.477-17.353 10.019-45.4 10.07-62.645.114C4.73 39.433.444 32.676.721 25.956Z"></path><ellipse cx="44.851" cy="27.666" fill="none" stroke="#83838a" rx="35.332" ry="20.398" transform="rotate(-.311)" stroke-miterlimit="10" stroke-width=".703"></ellipse><ellipse cx="44.835" cy="30.492" fill="none" stroke="#83838a" rx="26.668" ry="15.397" transform="rotate(-.311)" stroke-miterlimit="10" stroke-width=".703"></ellipse><path fill="none" stroke="#83838a" d="M29.634 41.956c-6.023-4.41-5.476-10.844 1.614-14.937 7.643-4.413 19.996-4.435 27.59-.05 7.176 4.143 7.538 10.736 1.114 15.172" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M31.529 42.583c-.897-2.53.365-5.27 3.778-7.242 5.387-3.11 14.093-3.125 19.447-.035 3.488 2.014 4.692 4.85 3.617 7.441" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M76.225 44.453s-9.586-7.102-20.578-.272" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M87.77 32.941s-18.977-3.125-29.19 9.717" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M87.85 19.774s-24.76 3.903-32.447 24.618" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M76.42 8.285S57.49 18.775 52.016 45.08M56.57 1.693s-7.5 15.79-9.006 43.872m8.978 5.514s-1.695-4.735-4.827-5.948m-38.135-.565s10.301-7.133 21.293-.302" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M2.14 33.055s19.445-3.24 29.67 9.639" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M2.304 19.75s24.993 4.093 32.68 24.808" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M13.94 8.285s18.92 10.592 24.392 36.898M33.806 1.724s7.492 15.794 8.997 43.876m-9.016 5.612s1.661-4.681 4.686-6.01" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#000000" d="M89.294 25.975c.13 6.668-4.23 13.374-13.07 18.478-17.353 10.018-45.4 10.07-62.644.113C4.725 39.454.44 32.696.716 25.976" stroke-miterlimit="10" stroke-width="1.406"></path><path fill="none" stroke="#000000" d="M.716 25.976c.262-6.368 4.617-12.703 13.06-17.578 17.353-10.018 45.4-10.07 62.644-.113 8.46 4.885 12.748 11.27 12.874 17.69" stroke-miterlimit="10" stroke-width="1.406"></path></svg></g></g><g><g id="f49c5361-e7e4-48b8-8e9d-42170de13529"><svg x="19" y="844" width="90" height="52.6"><path fill="#ececed" d="M.72 25.956c.262-6.368 4.618-12.703 13.06-17.578 17.353-10.019 45.4-10.07 62.645-.113 8.46 4.884 12.748 11.27 12.874 17.69.13 6.668-4.23 13.374-13.07 18.477-17.353 10.019-45.4 10.07-62.645.114C4.73 39.433.444 32.676.721 25.956Z"></path><ellipse cx="44.851" cy="27.666" fill="none" stroke="#83838a" rx="35.332" ry="20.398" transform="rotate(-.311)" stroke-miterlimit="10" stroke-width=".703"></ellipse><ellipse cx="44.835" cy="30.492" fill="none" stroke="#83838a" rx="26.668" ry="15.397" transform="rotate(-.311)" stroke-miterlimit="10" stroke-width=".703"></ellipse><path fill="none" stroke="#83838a" d="M29.634 41.956c-6.023-4.41-5.476-10.844 1.614-14.937 7.643-4.413 19.996-4.435 27.59-.05 7.176 4.143 7.538 10.736 1.114 15.172" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M31.529 42.583c-.897-2.53.365-5.27 3.778-7.242 5.387-3.11 14.093-3.125 19.447-.035 3.488 2.014 4.692 4.85 3.617 7.441" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M76.225 44.453s-9.586-7.102-20.578-.272" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M87.77 32.941s-18.977-3.125-29.19 9.717" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M87.85 19.774s-24.76 3.903-32.447 24.618" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M76.42 8.285S57.49 18.775 52.016 45.08M56.57 1.693s-7.5 15.79-9.006 43.872m8.978 5.514s-1.695-4.735-4.827-5.948m-38.135-.565s10.301-7.133 21.293-.302" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M2.14 33.055s19.445-3.24 29.67 9.639" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M2.304 19.75s24.993 4.093 32.68 24.808" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M13.94 8.285s18.92 10.592 24.392 36.898M33.806 1.724s7.492 15.794 8.997 43.876m-9.016 5.612s1.661-4.681 4.686-6.01" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#000000" d="M89.294 25.975c.13 6.668-4.23 13.374-13.07 18.478-17.353 10.018-45.4 10.07-62.644.113C4.725 39.454.44 32.696.716 25.976" stroke-miterlimit="10" stroke-width="1.406"></path><path fill="none" stroke="#000000" d="M.716 25.976c.262-6.368 4.617-12.703 13.06-17.578 17.353-10.018 45.4-10.07 62.644-.113 8.46 4.885 12.748 11.27 12.874 17.69" stroke-miterlimit="10" stroke-width="1.406"></path></svg></g></g><g><g id="786e207f-9a42-43e2-b625-889dff01b2be"><svg x="-365" y="844" width="90" height="52.6"><path fill="#ececed" d="M.72 25.956c.262-6.368 4.618-12.703 13.06-17.578 17.353-10.019 45.4-10.07 62.645-.113 8.46 4.884 12.748 11.27 12.874 17.69.13 6.668-4.23 13.374-13.07 18.477-17.353 10.019-45.4 10.07-62.645.114C4.73 39.433.444 32.676.721 25.956Z"></path><ellipse cx="44.851" cy="27.666" fill="none" stroke="#83838a" rx="35.332" ry="20.398" transform="rotate(-.311)" stroke-miterlimit="10" stroke-width=".703"></ellipse><ellipse cx="44.835" cy="30.492" fill="none" stroke="#83838a" rx="26.668" ry="15.397" transform="rotate(-.311)" stroke-miterlimit="10" stroke-width=".703"></ellipse><path fill="none" stroke="#83838a" d="M29.634 41.956c-6.023-4.41-5.476-10.844 1.614-14.937 7.643-4.413 19.996-4.435 27.59-.05 7.176 4.143 7.538 10.736 1.114 15.172" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M31.529 42.583c-.897-2.53.365-5.27 3.778-7.242 5.387-3.11 14.093-3.125 19.447-.035 3.488 2.014 4.692 4.85 3.617 7.441" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M76.225 44.453s-9.586-7.102-20.578-.272" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M87.77 32.941s-18.977-3.125-29.19 9.717" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M87.85 19.774s-24.76 3.903-32.447 24.618" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M76.42 8.285S57.49 18.775 52.016 45.08M56.57 1.693s-7.5 15.79-9.006 43.872m8.978 5.514s-1.695-4.735-4.827-5.948m-38.135-.565s10.301-7.133 21.293-.302" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M2.14 33.055s19.445-3.24 29.67 9.639" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M2.304 19.75s24.993 4.093 32.68 24.808" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M13.94 8.285s18.92 10.592 24.392 36.898M33.806 1.724s7.492 15.794 8.997 43.876m-9.016 5.612s1.661-4.681 4.686-6.01" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#000000" d="M89.294 25.975c.13 6.668-4.23 13.374-13.07 18.478-17.353 10.018-45.4 10.07-62.644.113C4.725 39.454.44 32.696.716 25.976" stroke-miterlimit="10" stroke-width="1.406"></path><path fill="none" stroke="#000000" d="M.716 25.976c.262-6.368 4.617-12.703 13.06-17.578 17.353-10.018 45.4-10.07 62.644-.113 8.46 4.885 12.748 11.27 12.874 17.69" stroke-miterlimit="10" stroke-width="1.406"></path></svg></g></g><g><g id="380ee9cb-c8ed-43fe-99d0-2e973ea84db4"><svg x="-1197" y="696" width="90" height="52.6"><path fill="#ececed" d="M.72 25.956c.262-6.368 4.618-12.703 13.06-17.578 17.353-10.019 45.4-10.07 62.645-.113 8.46 4.884 12.748 11.27 12.874 17.69.13 6.668-4.23 13.374-13.07 18.477-17.353 10.019-45.4 10.07-62.645.114C4.73 39.433.444 32.676.721 25.956Z"></path><ellipse cx="44.851" cy="27.666" fill="none" stroke="#83838a" rx="35.332" ry="20.398" transform="rotate(-.311)" stroke-miterlimit="10" stroke-width=".703"></ellipse><ellipse cx="44.835" cy="30.492" fill="none" stroke="#83838a" rx="26.668" ry="15.397" transform="rotate(-.311)" stroke-miterlimit="10" stroke-width=".703"></ellipse><path fill="none" stroke="#83838a" d="M29.634 41.956c-6.023-4.41-5.476-10.844 1.614-14.937 7.643-4.413 19.996-4.435 27.59-.05 7.176 4.143 7.538 10.736 1.114 15.172" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M31.529 42.583c-.897-2.53.365-5.27 3.778-7.242 5.387-3.11 14.093-3.125 19.447-.035 3.488 2.014 4.692 4.85 3.617 7.441" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M76.225 44.453s-9.586-7.102-20.578-.272" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M87.77 32.941s-18.977-3.125-29.19 9.717" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M87.85 19.774s-24.76 3.903-32.447 24.618" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M76.42 8.285S57.49 18.775 52.016 45.08M56.57 1.693s-7.5 15.79-9.006 43.872m8.978 5.514s-1.695-4.735-4.827-5.948m-38.135-.565s10.301-7.133 21.293-.302" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M2.14 33.055s19.445-3.24 29.67 9.639" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M2.304 19.75s24.993 4.093 32.68 24.808" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#83838a" d="M13.94 8.285s18.92 10.592 24.392 36.898M33.806 1.724s7.492 15.794 8.997 43.876m-9.016 5.612s1.661-4.681 4.686-6.01" stroke-miterlimit="10" stroke-width=".703"></path><path fill="none" stroke="#000000" d="M89.294 25.975c.13 6.668-4.23 13.374-13.07 18.478-17.353 10.018-45.4 10.07-62.644.113C4.725 39.454.44 32.696.716 25.976" stroke-miterlimit="10" stroke-width="1.406"></path><path fill="none" stroke="#000000" d="M.716 25.976c.262-6.368 4.617-12.703 13.06-17.578 17.353-10.018 45.4-10.07 62.644-.113 8.46 4.885 12.748 11.27 12.874 17.69" stroke-miterlimit="10" stroke-width="1.406"></path></svg></g></g></g><g pointer-events="auto"></g><g pointer-events="auto"></g><g pointer-events="auto"><g><g id="6e13cb2a-93ce-4b29-b0c9-352e44689bd1"><svg x="-1261" y="695" overflow="visible"><text stroke="#ffffff" stroke-width="4" font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="matrix(0.707 0.409 -0.707 0.409 0 0)" xml:space="preserve"><tspan x="8" dy="0">s3-vpc-endpoint</tspan></text><text font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="matrix(0.707 0.409 -0.707 0.409 0 0)" xml:space="preserve"><tspan x="8" dy="0">s3-vpc-endpoint</tspan></text></svg></g></g><g><g id="d60961ce-6d9d-48ad-a291-92c2218c5edf"><svg x="522" y="821" overflow="visible"><text stroke="#ffffff" stroke-width="4" font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="matrix(0.707 0.409 -0.707 0.409 0 0)" xml:space="preserve"><tspan x="8" dy="0">Keycloak internet gateway</tspan></text><text font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="matrix(0.707 0.409 -0.707 0.409 0 0)" xml:space="preserve"><tspan x="8" dy="0">Keycloak internet gateway</tspan></text></svg></g></g><g><g id="49ea7107-e81e-4d2d-b0d8-61e4faceca08"><svg x="-440" y="393" overflow="visible"><text stroke="#ffffff" stroke-width="4" font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="matrix(0.707 0.409 -0.707 0.409 0 0)" xml:space="preserve"><tspan x="8" dy="0">Keycloak DB</tspan></text><text font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="matrix(0.707 0.409 -0.707 0.409 0 0)" xml:space="preserve"><tspan x="8" dy="0">Keycloak DB</tspan></text></svg></g></g><g><g id="abae74be-0a59-454d-8a79-48fd0be5176a"><svg x="-454" y="829" overflow="visible"><text stroke="#ffffff" stroke-width="4" font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="matrix(0.707 0.409 -0.707 0.409 0 0)" xml:space="preserve"><tspan x="8" dy="0">ecr-dkr-vpc-endpoint</tspan></text><text font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="matrix(0.707 0.409 -0.707 0.409 0 0)" xml:space="preserve"><tspan x="8" dy="0">ecr-dkr-vpc-endpoint</tspan></text></svg></g></g><g><g id="ded2d6fb-74fc-49b5-b951-8c27d00fb6fe"><svg x="451" y="390" overflow="visible"><text stroke="#ffffff" stroke-width="4" font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="matrix(0.707 0.409 -0.707 0.409 0 0)" xml:space="preserve"><tspan x="8" dy="0">keycloak-alb</tspan></text><text font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="matrix(0.707 0.409 -0.707 0.409 0 0)" xml:space="preserve"><tspan x="8" dy="0">keycloak-alb</tspan></text></svg></g></g><g><g id="f784eeca-d436-4b9d-8a17-9f778368a7d4"><svg x="122" y="718" overflow="visible"><text stroke="#ffffff" stroke-width="4" font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="matrix(0.707 0.409 -0.707 0.409 0 0)" xml:space="preserve"><tspan x="8" dy="0">ecr-api-vpc-endpoint</tspan></text><text font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="matrix(0.707 0.409 -0.707 0.409 0 0)" xml:space="preserve"><tspan x="8" dy="0">ecr-api-vpc-endpoint</tspan></text></svg></g></g><g><g id="ce62faa7-ad7e-41fc-ad5c-9d14bbb43fdb"><svg x="-86" y="820" overflow="visible"><text stroke="#ffffff" stroke-width="4" font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="matrix(0.707 0.409 -0.707 0.409 0 0)" xml:space="preserve"><tspan x="8" dy="0">cloudwatch-vpc-endpoint</tspan></text><text font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="matrix(0.707 0.409 -0.707 0.409 0 0)" xml:space="preserve"><tspan x="8" dy="0">cloudwatch-vpc-endpoint</tspan></text></svg></g></g></g></g></svg>ture (11).svg…]()

![Uploading Web App Reference Architec<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
  "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1280" height="720" viewBox="-1528.8888888888887 -504 4273.777777777777 2404" id="ccdiagram"><filter id="grayscale"><feColorMatrix type="saturate" values="0"></feColorMatrix></filter><filter id="highlight"><feColorMatrix type="matrix" color-interpolation-filters="sRGB" values="0.20338 0 0 0 0
                0 0.58474 0 0 0
                0 0 0.97033 0 0
                0 0 0 1 0"></feColorMatrix></filter><defs><style type="text/css">@import url('https://fonts.googleapis.com/css?family=Open+Sans:400,700|Inconsolata:400');</style></defs><g><rect x="-1528.8888888888887" y="-504" width="4273.777777777777" height="2404" fill="none" id="interactionLayer"></rect><g pointer-events="auto"></g><g pointer-events="auto"><g><g id="6f91aa85-cea6-49a6-b627-82c3e5a6ca79"><g><polygon points="23 -67, 473 -67, 473 383, 23 383" fill="#ececed" stroke="#000000"></polygon><svg x="-130" y="-178" overflow="visible"><g fill="#9e9e9e" fill-opacity="1" stroke="none" transform="scale(1.25) "><path stroke="none" d="M144 93.924l-14.834 8.565v19.577l16.954 9.789 14.835-8.565-6.358-3.67-8.477 4.893-10.597-6.117V106.16l8.478-4.894z"></path><path stroke="none" d="M148.24 93.924v7.342l8.476 4.894v9.788l6.358 3.671v-17.13z"></path></g></svg><svg x="81" y="-22" overflow="visible"><clipPath id="clip-6f91aa85-cea6-49a6-b627-82c3e5a6ca79"><polygon points="-58 -45, 391 -45, 391 405, -58 405"></polygon></clipPath><g clip-path="url(#clip-6f91aa85-cea6-49a6-b627-82c3e5a6ca79)" font-family="Open Sans" font-size="32pt" fill="#000000" font-weight="bold"><text stroke="#ffffff" stroke-width="4"><tspan>keycloak-cluster</tspan></text><text><tspan>keycloak-cluster</tspan></text></g></svg></g></g></g></g><g pointer-events="auto"><g><g id="sg-0930261d8b1dd3991"><g><g><polygon points="1238 1373, 1283 1328, 1283 608, 1238 563, 968 563, 923 608, 923 878, 878 923, 653 923, 653 1418, 698 1463, 968 1463, 1058 1373" stroke="#2196f3" stroke-width="8" fill="none"></polygon></g><g><polygon points="653 923, 608 923, 608 1238, 653 1283" stroke="#2196f3" stroke-width="8" fill="#2196f3"></polygon><text font-family="Inconsolata" font-size="20pt" font-weight="bold" fill="#ffffff" transform="translate(640 977) rotate(270)" text-anchor="end">keycloak-vpc-endpo...</text><g transform="translate(619 934) "><svg width="23" height="32" style="fill: rgb(255, 255, 255);"><svg xmlns="http://www.w3.org/2000/svg" width="23" height="32" viewBox="0 0 23 32"><path d="M19.429 17.143V5.714h-8v20.304c.911-.482 2.375-1.321 3.804-2.446 1.911-1.5 4.196-3.839 4.196-6.429zm3.428-13.714v13.714c0 7.518-10.518 12.268-10.964 12.464a1.049 1.049 0 0 1-.928 0C10.519 29.411.001 24.661.001 17.143V3.429c0-.625.518-1.143 1.143-1.143h20.571c.625 0 1.143.518 1.143 1.143z"></path></svg></svg></g></g></g></g></g><g><g id="sg-06b4e25db8228b13b"><g><g><polygon points="383 923, 428 878, 428 608, 383 563, 68 563, 68 878, 113 923" stroke="#03a9f4" stroke-width="8" fill="none"></polygon></g><g><polygon points="68 563, 23 563, 23 833, 68 878" stroke="#03a9f4" stroke-width="8" fill="#03a9f4"></polygon><text font-family="Inconsolata" font-size="20pt" font-weight="bold" fill="#ffffff" transform="translate(55 617) rotate(270)" text-anchor="end">rds-security-g...</text><g transform="translate(34 574) "><svg width="23" height="32" style="fill: rgb(255, 255, 255);"><svg xmlns="http://www.w3.org/2000/svg" width="23" height="32" viewBox="0 0 23 32"><path d="M19.429 17.143V5.714h-8v20.304c.911-.482 2.375-1.321 3.804-2.446 1.911-1.5 4.196-3.839 4.196-6.429zm3.428-13.714v13.714c0 7.518-10.518 12.268-10.964 12.464a1.049 1.049 0 0 1-.928 0C10.519 29.411.001 24.661.001 17.143V3.429c0-.625.518-1.143 1.143-1.143h20.571c.625 0 1.143.518 1.143 1.143z"></path></svg></svg></g></g></g></g></g><g><g id="sg-05b3f43d006912a8a"></g></g><g><g id="sg-00b5bf618ec31ae2f"><g><g><polygon points="1013 293, 1058 248, 1058 -22, 1013 -67, 698 -67, 698 248, 743 293" stroke="#9e9e9e" stroke-width="8" fill="none"></polygon></g><g><polygon points="698 -67, 653 -67, 653 203, 698 248" stroke="#9e9e9e" stroke-width="8" fill="#9e9e9e"></polygon><text font-family="Inconsolata" font-size="20pt" font-weight="bold" fill="#ffffff" transform="translate(685 -13) rotate(270)" text-anchor="end">keycloak-alb-sg</text><g transform="translate(664 -56) "><svg width="23" height="32" style="fill: rgb(255, 255, 255);"><svg xmlns="http://www.w3.org/2000/svg" width="23" height="32" viewBox="0 0 23 32"><path d="M19.429 17.143V5.714h-8v20.304c.911-.482 2.375-1.321 3.804-2.446 1.911-1.5 4.196-3.839 4.196-6.429zm3.428-13.714v13.714c0 7.518-10.518 12.268-10.964 12.464a1.049 1.049 0 0 1-.928 0C10.519 29.411.001 24.661.001 17.143V3.429c0-.625.518-1.143 1.143-1.143h20.571c.625 0 1.143.518 1.143 1.143z"></path></svg></svg></g></g></g></g></g></g><g></g><g pointer-events="auto"><g><g id="vpc-02090d59cdd3422d8"><g><g><polygon points="1688 1868, 1688 -472, -427 -472, -427 1868" stroke="#ffa000" stroke-width="8" fill="none"></polygon></g><g><polygon points="-427 -472, -472 -472, -472 -157, -427 -112" stroke="#ffa000" stroke-width="8" fill="#ffa000"></polygon><text font-family="Inconsolata" font-size="20pt" font-weight="bold" fill="#ffffff" transform="translate(-440 -429) rotate(270)" text-anchor="end">Keycloak VPC</text><g transform="translate(-467 -467) "><svg width="34" height="32" style="fill: rgb(255, 255, 255);"><svg xmlns="http://www.w3.org/2000/svg" width="34" height="32" viewBox="0 0 34 32"><path d="M34.286 20.571a6.858 6.858 0 0 1-6.857 6.857H8c-4.411 0-8-3.589-8-8a7.993 7.993 0 0 1 4.607-7.232c-.018-.25-.036-.518-.036-.768a9.137 9.137 0 0 1 9.143-9.143c3.821 0 7.089 2.339 8.464 5.679a4.439 4.439 0 0 1 2.964-1.107 4.58 4.58 0 0 1 4.571 4.571 4.49 4.49 0 0 1-.732 2.464c3.036.714 5.304 3.429 5.304 6.679z"></path></svg></svg></g></g></g></g></g></g><g></g><g pointer-events="auto"><g><g id="subnet-04d11f4d43902b3aa"><g><g><polygon points="1418 1598, 1418 -337, -247 -337, -247 1598" stroke="#4caf50" stroke-width="8" stroke-dasharray="16" fill="none"></polygon></g><g><polygon points="-247 -337, -292 -337, -292 -22, -247 23" stroke="#4caf50" stroke-width="8" fill="#4caf50"></polygon><text font-family="Inconsolata" font-size="20pt" font-weight="bold" fill="#ffffff" transform="translate(-260 -281) rotate(270)" text-anchor="end">Keycloak ECS Subnet</text><g transform="translate(-280 -325) "><svg width="21" height="32" style="fill: rgb(255, 255, 255);"><svg xmlns="http://www.w3.org/2000/svg" width="21" height="32" viewBox="0 0 21 32"><path d="M5.714 13.714h9.143v-3.429c0-2.518-2.054-4.571-4.571-4.571s-4.571 2.054-4.571 4.571v3.429zm14.857 1.715v10.286c0 .946-.768 1.714-1.714 1.714H1.714A1.715 1.715 0 0 1 0 25.715V15.429c0-.946.768-1.714 1.714-1.714h.571v-3.429c0-4.393 3.607-8 8-8s8 3.607 8 8v3.429h.571c.946 0 1.714.768 1.714 1.714z"></path></svg></svg></g></g></g></g></g><g><g id="subnet-0cb78dc15bfdf00fe"><g><g><polygon points="1418 1598, 1418 -337, -247 -337, -247 1598" stroke="#4caf50" stroke-width="8" stroke-dasharray="16" fill="none"></polygon></g><g><polygon points="-247 -337, -292 -337, -292 -22, -247 23" stroke="#4caf50" stroke-width="8" fill="#4caf50"></polygon><text font-family="Inconsolata" font-size="20pt" font-weight="bold" fill="#ffffff" transform="translate(-260 -281) rotate(270)" text-anchor="end">Keycloak ECS Subnet</text><g transform="translate(-280 -325) "><svg width="21" height="32" style="fill: rgb(255, 255, 255);"><svg xmlns="http://www.w3.org/2000/svg" width="21" height="32" viewBox="0 0 21 32"><path d="M5.714 13.714h9.143v-3.429c0-2.518-2.054-4.571-4.571-4.571s-4.571 2.054-4.571 4.571v3.429zm14.857 1.715v10.286c0 .946-.768 1.714-1.714 1.714H1.714A1.715 1.715 0 0 1 0 25.715V15.429c0-.946.768-1.714 1.714-1.714h.571v-3.429c0-4.393 3.607-8 8-8s8 3.607 8 8v3.429h.571c.946 0 1.714.768 1.714 1.714z"></path></svg></svg></g></g></g></g></g><g><g id="subnet-07c4ae165faf287fd"><g><g><polygon points="1193 428, 1193 -202, 563 -202, 563 428" stroke="#9e9e9e" stroke-width="8" stroke-dasharray="16" fill="none"></polygon></g><g><polygon points="563 -202, 518 -202, 518 113, 563 158" stroke="#9e9e9e" stroke-width="8" fill="#9e9e9e"></polygon><text font-family="Inconsolata" font-size="20pt" font-weight="bold" fill="#ffffff" transform="translate(550 -152) rotate(270)" text-anchor="end">Keycloak load bala...</text><g transform="translate(527 -193) "><svg width="27" height="32" style="fill: rgb(255, 255, 255);"><svg xmlns="http://www.w3.org/2000/svg" width="27" height="32" viewBox="0 0 27 32"><path d="M13.714 2.286c7.571 0 13.714 6.143 13.714 13.714s-6.143 13.714-13.714 13.714S0 23.571 0 16 6.143 2.286 13.714 2.286zm4.893 9.303c-.143.107-.232.304-.411.339.089-.018.179-.339.232-.411.107-.125.25-.196.393-.268.304-.125.607-.161.929-.214.304-.071.679-.071.911.196-.054-.054.375-.429.429-.446.161-.089.429-.054.536-.214.036-.054.036-.393.036-.393-.304.036-.411-.25-.429-.5 0 .018-.036.071-.107.143.018-.268-.321-.071-.446-.107-.411-.107-.357-.393-.482-.696-.071-.161-.268-.214-.339-.375-.071-.107-.107-.339-.268-.357-.107-.018-.304.375-.339.357-.161-.089-.232.036-.357.107-.107.071-.196.036-.304.089.321-.107-.143-.286-.304-.25.25-.071.125-.339-.018-.464h.089c-.036-.161-.536-.304-.696-.411s-1.018-.286-1.196-.179c-.214.125.054.482.054.661.018.214-.214.268-.214.446 0 .304.571.25.429.661-.089.25-.429.304-.571.5-.143.179.018.5.161.625.143.107-.25.286-.304.321-.304.143-.536-.304-.607-.571-.054-.196-.071-.429-.286-.536-.107-.036-.446-.089-.518.018-.107-.268-.482-.375-.732-.464-.357-.125-.661-.125-1.036-.071.125-.018-.036-.571-.339-.482.089-.179.054-.375.089-.554.036-.143.107-.286.214-.411.036-.071.429-.482.304-.5.304.036.643.054.893-.196.161-.161.232-.429.393-.607.232-.268.518.071.768.089.357.018.339-.375.143-.554.232.018.036-.411-.089-.464-.161-.054-.768.107-.446.232-.071-.036-.5.857-.75.411-.071-.089-.107-.464-.268-.482-.143 0-.232.161-.286.268.089-.232-.5-.393-.625-.411.268-.179.054-.375-.143-.482-.143-.089-.589-.161-.714-.018-.339.411.357.464.536.571.054.036.268.161.143.25-.107.054-.429.143-.464.214-.107.161.125.339-.036.5-.161-.161-.161-.429-.286-.607.161.196-.643.089-.625.089-.268 0-.696.179-.893-.089-.036-.071-.036-.482.071-.393-.161-.125-.268-.25-.375-.321-.589.196-1.143.446-1.679.732a.302.302 0 0 0 .214-.018c.143-.054.268-.143.411-.214.179-.071.554-.286.75-.125.018-.036.071-.071.089-.089.125.143.25.286.357.446-.143-.071-.375-.036-.536-.018-.125.036-.339.071-.393.214.054.089.125.232.089.321-.232-.161-.411-.429-.732-.464-.143 0-.286 0-.393.018a11.598 11.598 0 0 0-4.196 3.964.506.506 0 0 0 .214.143c.179.054 0 .571.339.304.107.089.125.214.054.339.018-.018.732.446.786.482.125.107.321.232.375.375.036.125-.071.268-.179.321-.018-.036-.286-.304-.321-.232-.054.089 0 .571.196.554-.286.018-.161 1.125-.232 1.339 0 .018.036.018.036.018-.054.214.125 1.054.482.964-.232.054.411.875.5.929.232.161.5.268.661.5.179.25.179.625.429.821-.071.214.375.464.357.768-.036.018-.054.018-.089.036.089.25.429.25.554.482.071.143 0 .482.232.411.036-.393-.232-.786-.429-1.107-.107-.179-.214-.339-.304-.518-.089-.161-.107-.357-.179-.536.071.018.464.161.429.214-.143.357.571.982.768 1.214.054.054.464.589.25.589.232 0 .554.357.661.536.161.268.125.607.232.893.107.357.607.518.893.679.25.125.464.304.714.393.375.143.464.018.786-.036.464-.071.518.446.893.643.232.125.732.304.982.196-.107.036.375.768.411.821.161.214.464.321.643.536a.283.283 0 0 0 .125-.161c-.071.196.268.571.446.536.196-.036.25-.429.25-.571-.357.179-.679.036-.875-.321-.036-.089-.321-.589-.071-.589.339 0 .107-.268.071-.518s-.286-.411-.411-.625c-.107.214-.464.161-.571-.018 0 .054-.054.143-.054.214-.089 0-.179.018-.268-.018.036-.214.054-.482.107-.714.089-.321.679-.946-.089-.911-.268.018-.375.125-.464.357-.089.214-.054.411-.304.518-.161.071-.696.036-.857-.054-.339-.196-.571-.821-.571-1.179-.018-.482.232-.911 0-1.357.107-.089.214-.268.339-.357.107-.071.232.054.286-.161-.054-.036-.125-.107-.143-.107.268.125.768-.179 1 0 .143.107.304.143.393-.036.018-.054-.125-.268-.054-.411.054.304.25.357.518.161.107.107.393.071.589.179.196.125.232.321.464.054.143.214.161.214.214.429.054.196.161.696.339.786.375.232.286-.393.25-.607-.018-.018-.018-.607-.036-.607-.571-.125-.357-.571-.036-.875.054-.036.464-.179.643-.321.161-.143.357-.393.268-.625.089 0 .161-.071.196-.161-.054-.018-.268-.196-.304-.179.125-.071.107-.179.036-.286.179-.107.089-.304.268-.375.196.268.589-.036.393-.25.179-.25.589-.125.696-.357.268.071.071-.268.214-.464.125-.161.339-.161.5-.25 0 .018.446-.25.304-.268.304.036.911-.286.446-.554.071-.161-.161-.232-.321-.268.125-.036.286.036.393-.036.232-.161.071-.232-.125-.286-.25-.071-.571.089-.768.214zM15.696 27.25a11.341 11.341 0 0 0 6.268-3.375c-.107-.107-.304-.071-.446-.143-.143-.054-.25-.107-.429-.143.036-.357-.357-.482-.607-.661-.232-.179-.375-.375-.714-.304-.036.018-.393.143-.321.214-.232-.196-.339-.304-.643-.393-.286-.089-.482-.446-.768-.125-.143.143-.071.357-.143.5-.232-.196.214-.429.036-.643-.214-.25-.589.161-.768.268-.107.089-.232.125-.304.232-.089.125-.125.286-.196.411-.054-.143-.357-.107-.375-.214.071.429.071.875.161 1.304.054.25 0 .661-.214.857s-.482.411-.518.714c-.036.214.018.411.214.464.018.268-.286.464-.268.75 0 .018.018.196.036.286z"></path></svg></svg></g></g></g></g></g><g><g id="subnet-00b6a9bcf31a243a5"><g><g><polygon points="563 1058, 563 428, -67 428, -67 1058" stroke="#00bcd4" stroke-width="8" stroke-dasharray="16" fill="none"></polygon></g><g><polygon points="-67 428, -112 428, -112 743, -67 788" stroke="#00bcd4" stroke-width="8" fill="#00bcd4"></polygon><text font-family="Inconsolata" font-size="20pt" font-weight="bold" fill="#ffffff" transform="translate(-80 483) rotate(270)" text-anchor="end">Keycloak DB Subnet</text><g transform="translate(-100 440) "><svg width="21" height="32" style="fill: rgb(255, 255, 255);"><svg xmlns="http://www.w3.org/2000/svg" width="21" height="32" viewBox="0 0 21 32"><path d="M5.714 13.714h9.143v-3.429c0-2.518-2.054-4.571-4.571-4.571s-4.571 2.054-4.571 4.571v3.429zm14.857 1.715v10.286c0 .946-.768 1.714-1.714 1.714H1.714A1.715 1.715 0 0 1 0 25.715V15.429c0-.946.768-1.714 1.714-1.714h.571v-3.429c0-4.393 3.607-8 8-8s8 3.607 8 8v3.429h.571c.946 0 1.714.768 1.714 1.714z"></path></svg></svg></g></g></g></g></g><g><g id="subnet-0d05c064273b0b3b5"><g><g><polygon points="1193 428, 1193 -202, 563 -202, 563 428" stroke="#00bcd4" stroke-width="8" stroke-dasharray="16" fill="none"></polygon></g><g><polygon points="563 -202, 518 -202, 518 113, 563 158" stroke="#00bcd4" stroke-width="8" fill="#00bcd4"></polygon><text font-family="Inconsolata" font-size="20pt" font-weight="bold" fill="#ffffff" transform="translate(550 -152) rotate(270)" text-anchor="end">Keycloak load bala...</text><g transform="translate(527 -193) "><svg width="27" height="32" style="fill: rgb(255, 255, 255);"><svg xmlns="http://www.w3.org/2000/svg" width="27" height="32" viewBox="0 0 27 32"><path d="M13.714 2.286c7.571 0 13.714 6.143 13.714 13.714s-6.143 13.714-13.714 13.714S0 23.571 0 16 6.143 2.286 13.714 2.286zm4.893 9.303c-.143.107-.232.304-.411.339.089-.018.179-.339.232-.411.107-.125.25-.196.393-.268.304-.125.607-.161.929-.214.304-.071.679-.071.911.196-.054-.054.375-.429.429-.446.161-.089.429-.054.536-.214.036-.054.036-.393.036-.393-.304.036-.411-.25-.429-.5 0 .018-.036.071-.107.143.018-.268-.321-.071-.446-.107-.411-.107-.357-.393-.482-.696-.071-.161-.268-.214-.339-.375-.071-.107-.107-.339-.268-.357-.107-.018-.304.375-.339.357-.161-.089-.232.036-.357.107-.107.071-.196.036-.304.089.321-.107-.143-.286-.304-.25.25-.071.125-.339-.018-.464h.089c-.036-.161-.536-.304-.696-.411s-1.018-.286-1.196-.179c-.214.125.054.482.054.661.018.214-.214.268-.214.446 0 .304.571.25.429.661-.089.25-.429.304-.571.5-.143.179.018.5.161.625.143.107-.25.286-.304.321-.304.143-.536-.304-.607-.571-.054-.196-.071-.429-.286-.536-.107-.036-.446-.089-.518.018-.107-.268-.482-.375-.732-.464-.357-.125-.661-.125-1.036-.071.125-.018-.036-.571-.339-.482.089-.179.054-.375.089-.554.036-.143.107-.286.214-.411.036-.071.429-.482.304-.5.304.036.643.054.893-.196.161-.161.232-.429.393-.607.232-.268.518.071.768.089.357.018.339-.375.143-.554.232.018.036-.411-.089-.464-.161-.054-.768.107-.446.232-.071-.036-.5.857-.75.411-.071-.089-.107-.464-.268-.482-.143 0-.232.161-.286.268.089-.232-.5-.393-.625-.411.268-.179.054-.375-.143-.482-.143-.089-.589-.161-.714-.018-.339.411.357.464.536.571.054.036.268.161.143.25-.107.054-.429.143-.464.214-.107.161.125.339-.036.5-.161-.161-.161-.429-.286-.607.161.196-.643.089-.625.089-.268 0-.696.179-.893-.089-.036-.071-.036-.482.071-.393-.161-.125-.268-.25-.375-.321-.589.196-1.143.446-1.679.732a.302.302 0 0 0 .214-.018c.143-.054.268-.143.411-.214.179-.071.554-.286.75-.125.018-.036.071-.071.089-.089.125.143.25.286.357.446-.143-.071-.375-.036-.536-.018-.125.036-.339.071-.393.214.054.089.125.232.089.321-.232-.161-.411-.429-.732-.464-.143 0-.286 0-.393.018a11.598 11.598 0 0 0-4.196 3.964.506.506 0 0 0 .214.143c.179.054 0 .571.339.304.107.089.125.214.054.339.018-.018.732.446.786.482.125.107.321.232.375.375.036.125-.071.268-.179.321-.018-.036-.286-.304-.321-.232-.054.089 0 .571.196.554-.286.018-.161 1.125-.232 1.339 0 .018.036.018.036.018-.054.214.125 1.054.482.964-.232.054.411.875.5.929.232.161.5.268.661.5.179.25.179.625.429.821-.071.214.375.464.357.768-.036.018-.054.018-.089.036.089.25.429.25.554.482.071.143 0 .482.232.411.036-.393-.232-.786-.429-1.107-.107-.179-.214-.339-.304-.518-.089-.161-.107-.357-.179-.536.071.018.464.161.429.214-.143.357.571.982.768 1.214.054.054.464.589.25.589.232 0 .554.357.661.536.161.268.125.607.232.893.107.357.607.518.893.679.25.125.464.304.714.393.375.143.464.018.786-.036.464-.071.518.446.893.643.232.125.732.304.982.196-.107.036.375.768.411.821.161.214.464.321.643.536a.283.283 0 0 0 .125-.161c-.071.196.268.571.446.536.196-.036.25-.429.25-.571-.357.179-.679.036-.875-.321-.036-.089-.321-.589-.071-.589.339 0 .107-.268.071-.518s-.286-.411-.411-.625c-.107.214-.464.161-.571-.018 0 .054-.054.143-.054.214-.089 0-.179.018-.268-.018.036-.214.054-.482.107-.714.089-.321.679-.946-.089-.911-.268.018-.375.125-.464.357-.089.214-.054.411-.304.518-.161.071-.696.036-.857-.054-.339-.196-.571-.821-.571-1.179-.018-.482.232-.911 0-1.357.107-.089.214-.268.339-.357.107-.071.232.054.286-.161-.054-.036-.125-.107-.143-.107.268.125.768-.179 1 0 .143.107.304.143.393-.036.018-.054-.125-.268-.054-.411.054.304.25.357.518.161.107.107.393.071.589.179.196.125.232.321.464.054.143.214.161.214.214.429.054.196.161.696.339.786.375.232.286-.393.25-.607-.018-.018-.018-.607-.036-.607-.571-.125-.357-.571-.036-.875.054-.036.464-.179.643-.321.161-.143.357-.393.268-.625.089 0 .161-.071.196-.161-.054-.018-.268-.196-.304-.179.125-.071.107-.179.036-.286.179-.107.089-.304.268-.375.196.268.589-.036.393-.25.179-.25.589-.125.696-.357.268.071.071-.268.214-.464.125-.161.339-.161.5-.25 0 .018.446-.25.304-.268.304.036.911-.286.446-.554.071-.161-.161-.232-.321-.268.125-.036.286.036.393-.036.232-.161.071-.232-.125-.286-.25-.071-.571.089-.768.214zM15.696 27.25a11.341 11.341 0 0 0 6.268-3.375c-.107-.107-.304-.071-.446-.143-.143-.054-.25-.107-.429-.143.036-.357-.357-.482-.607-.661-.232-.179-.375-.375-.714-.304-.036.018-.393.143-.321.214-.232-.196-.339-.304-.643-.393-.286-.089-.482-.446-.768-.125-.143.143-.071.357-.143.5-.232-.196.214-.429.036-.643-.214-.25-.589.161-.768.268-.107.089-.232.125-.304.232-.089.125-.125.286-.196.411-.054-.143-.357-.107-.375-.214.071.429.071.875.161 1.304.054.25 0 .661-.214.857s-.482.411-.518.714c-.036.214.018.411.214.464.018.268-.286.464-.268.75 0 .018.018.196.036.286z"></path></svg></svg></g></g></g></g></g><g><g id="subnet-09068ad77567e6bfb"><g><g><polygon points="563 1058, 563 428, -67 428, -67 1058" stroke="#00bcd4" stroke-width="8" stroke-dasharray="16" fill="none"></polygon></g><g><polygon points="-67 428, -112 428, -112 743, -67 788" stroke="#00bcd4" stroke-width="8" fill="#00bcd4"></polygon><text font-family="Inconsolata" font-size="20pt" font-weight="bold" fill="#ffffff" transform="translate(-80 483) rotate(270)" text-anchor="end">Keycloak DB Subnet</text><g transform="translate(-100 440) "><svg width="21" height="32" style="fill: rgb(255, 255, 255);"><svg xmlns="http://www.w3.org/2000/svg" width="21" height="32" viewBox="0 0 21 32"><path d="M5.714 13.714h9.143v-3.429c0-2.518-2.054-4.571-4.571-4.571s-4.571 2.054-4.571 4.571v3.429zm14.857 1.715v10.286c0 .946-.768 1.714-1.714 1.714H1.714A1.715 1.715 0 0 1 0 25.715V15.429c0-.946.768-1.714 1.714-1.714h.571v-3.429c0-4.393 3.607-8 8-8s8 3.607 8 8v3.429h.571c.946 0 1.714.768 1.714 1.714z"></path></svg></svg></g></g></g></g></g></g><g pointer-events="auto"><g><g id="b9c22054-c771-4e13-a726-101a08e3116a"><g><polygon points="113 23, 383 23, 383 293, 113 293" fill="#fff" stroke="#000000"></polygon><svg x="122" y="59" overflow="visible"><clipPath id="clip-b9c22054-c771-4e13-a726-101a08e3116a"><polygon points="-9 -36, 252 -36, 252 234, -9 234"></polygon></clipPath><g clip-path="url(#clip-b9c22054-c771-4e13-a726-101a08e3116a)" font-family="Open Sans" font-size="25pt" fill="#000000" font-weight="bold"><text stroke="#ffffff" stroke-width="4"><tspan>keycloak-service</tspan></text><text><tspan>keycloak-service</tspan></text></g></svg></g></g></g></g><g pointer-events="none"></g><g pointer-events="auto"><g id="c647bfac-6bee-42e8-b14b-9b485d10e3d4-b9c22054-c771-4e13-a726-101a08e3116a"><g cursor="cell"><line x1="833" y1="113" x2="396" y2="156" stroke="red" stroke-width="8" opacity="0"></line><line x1="833" y1="113" x2="396" y2="156" stroke="#000000" stroke-width="2" stroke-linecap="round"></line><polygon points="383 158, 408 166, 400 156, 406 144, 383 158" stroke-linejoin="round" fill="#000000" stroke="#000000" stroke-width="1"></polygon></g></g></g><g pointer-events="auto"><g><g id="c647bfac-6bee-42e8-b14b-9b485d10e3d4"><svg x="833" y="68" width="90" height="90"><path fill="#693cc5" d="M0 0h90v90H0z"></path><path fill="#ffffff" d="M59.448 46.2a7.464 7.464 0 1 0 0-2.4h-8.952a16.932 16.932 0 0 0-1.68-6.36l10.8-9.132a7.464 7.464 0 1 0-2.832-5.844 7.296 7.296 0 0 0 1.2 4.08l-10.44 8.796a17.4 17.4 0 1 0 0 19.32l10.44 8.796a7.296 7.296 0 0 0-1.2 4.08 7.452 7.452 0 1 0 2.832-5.844l-10.8-9.132a16.932 16.932 0 0 0 1.68-6.36zm7.344-6.264A5.064 5.064 0 1 1 61.74 45a5.064 5.064 0 0 1 5.052-5.064zM64.296 17.4a5.064 5.064 0 1 1-5.064 5.064 5.064 5.064 0 0 1 5.064-5.064zm0 45.084a5.064 5.064 0 1 1-5.064 5.052 5.064 5.064 0 0 1 5.064-5.052zM33.144 60a15 15 0 1 1 15-15 15.024 15.024 0 0 1-15 15Z"></path></svg></g></g><g><g id="7972bc72-2b5a-4e2b-9178-766d86a57864"><svg x="203" y="113" width="90" height="90"><path fill="#d86613" d="M5.033 3.831h79.93v82.34H5.033Z" opacity=".05"></path><path fill="#d86613" d="M87.483 90H2.517C1.127 90 0 89.144 0 88.087V1.916C0 .858 1.127 0 2.517 0h84.966C88.873 0 90 .858 90 1.916v86.17C90 89.143 88.873 90 87.483 90zM3.85 86.17l82.3.001V3.831H3.85Z"></path><path fill="#d86613" d="M9.378 27.122h3.789v39.07h-3.79zm10.643 0h3.788v39.07h-3.788zm46.17 0h3.79v39.07h-3.79zm10.646 0h3.789v39.07h-3.79zm-20.72 33.843H33.884a3.2 3.201 0 0 1-3.203-3.201V35.529a3.2 3.201 0 0 1 3.203-3.199h22.233a3.2 3.201 0 0 1 3.2 3.201v22.233a3.2 3.201 0 0 1-3.202 3.2zM34.47 57.177h21.06v-21.06H34.47z"></path><path fill="#d86613" d="M32.463 28.902h3.789v5.322h-3.789zm7.103 0h3.789v5.322h-3.79zm7.1 0h3.789v5.322h-3.789zm7.103 0h3.789v5.322h-3.79zm-21.306 30.17h3.789v5.321h-3.789zm7.103 0h3.789v5.321h-3.79zm7.1 0h3.789v5.321h-3.789zm7.103 0h3.789v5.321h-3.79z"></path><path fill="#d86613" d="M27.254 34.11h5.323v3.788h-5.323zm0 7.103h5.323V45h-5.323zm0 7.1h5.323v3.788h-5.323zm0 7.102h5.323v3.788h-5.323zm30.17-21.305h5.323v3.788h-5.322zm0 7.103h5.323V45h-5.322zm0 7.1h5.323v3.788h-5.322zm0 7.102h5.323v3.788h-5.322z"></path></svg></g></g><g><g id="72841374-5d1f-49d8-869a-e06868c48db7"><svg x="1463" y="563" width="90" height="90"><g fill="#693cc5"><path d="M45 90a45 45 0 1 1 45-45 45.038 45.038 0 0 1-45 45Zm0-86.17A41.17 41.17 0 1 0 86.17 45 41.209 41.209 0 0 0 45 3.83Z"></path><path d="M66.543 72.039h-7.2a1.915 1.915 0 0 1-1.915-1.915v-37.15A27.383 27.383 0 0 0 45.46 29.95a28.092 28.092 0 0 0-12.964 3.447v36.728a1.915 1.915 0 0 1-1.915 1.915h-7.123a1.915 1.915 0 0 1-1.915-1.915V28.341a1.915 1.915 0 0 1 .651-1.436 35.387 35.387 0 0 1 23.285-7.985 36.383 36.383 0 0 1 22.251 7.104 1.915 1.915 0 0 1 .728 1.513v42.587a1.915 1.915 0 0 1-1.915 1.915zm-5.285-3.83h3.37V28.475A32.898 32.898 0 0 0 45.48 22.73a32.036 32.036 0 0 0-20.106 6.473v39.006h3.293v-36a1.915 1.915 0 0 1 1.054-1.723 33.606 33.606 0 0 1 15.74-4.366 32.783 32.783 0 0 1 14.496 3.83h.191a1.915 1.915 0 0 1 1.111 1.742z"></path></g><circle cx="45" cy="45" r="44.371" fill="#693cc5" opacity=".05"></circle></svg></g></g><g><g id="0b831c7a-9eea-4e5e-8688-7c53993fad48"><svg x="203" y="698" width="90" height="90"><path fill="#3b48cc" d="M0 0h90v90H0z"></path><path fill="#ffffff" d="M58.14 33.876c0-3.48-6.828-5.088-13.2-5.088s-13.2 1.608-13.2 5.088a1.848 1.848 0 0 0 .06.516v21.66c-.06 3.6 6.78 5.136 13.2 5.136s13.2-1.584 13.2-5.064V33.876ZM44.964 31.2c6.996 0 10.8 1.908 10.8 2.688 0 .78-3.78 2.688-10.8 2.688s-10.8-1.896-10.8-2.688c0-.792 3.804-2.688 10.8-2.688zm10.8 24.936c0 .768-3.792 2.664-10.8 2.664s-10.8-1.896-10.8-2.664v-3.792c2.532 1.38 6.78 2.04 10.8 2.04 4.02 0 8.232-.648 10.8-2.004zm0-6.828c0 .768-3.78 2.688-10.8 2.688s-10.8-1.92-10.8-2.688v-4.584c2.532 1.368 6.78 2.028 10.8 2.028 4.02 0 8.232-.648 10.8-2.004zm0-7.644c0 .78-3.78 2.7-10.8 2.7s-10.8-1.92-10.8-2.7v-4.68c2.556 1.356 6.756 1.98 10.8 1.98s8.292-.648 10.8-2.028zM19.092 72.612H27v2.4H16.2a1.2 1.2 0 0 1-1.2-1.2v-10.8h2.4v7.884l9-8.988 1.68 1.692ZM75 63.012v10.8a1.2 1.2 0 0 1-1.2 1.2H63v-2.4h7.908L62.04 63.72l1.692-1.68 8.868 8.856v-7.884zm0-46.8v10.8h-2.4v-7.92l-8.868 8.868-1.692-1.692 8.856-8.856H63v-2.4h10.8a1.2 1.2 0 0 1 1.2 1.2zM28.08 26.4l-1.68 1.68-9-8.988v7.896H15v-10.8a1.2 1.2 0 0 1 1.2-1.2H27v2.4h-7.908zm-1.488 29.352C19.26 53.112 15.06 49.08 15.06 44.7s4.2-8.4 11.532-11.052l.816 2.256c-6.228 2.244-9.948 5.532-9.948 8.796 0 3.264 3.72 6.552 9.948 8.796zm36.144.264-.768-2.28C68.628 51.492 72.6 48.108 72.6 44.7s-3.972-6.792-10.632-9.048l.768-2.268C70.524 36 75 40.152 75 44.7s-4.476 8.676-12.264 11.316z"></path></svg></g></g><g><g id="833c9c35-b8ff-4d56-a433-37d33e1fbb85"><svg x="1058" y="698" width="90" height="90"><g fill="#693cc5"><path d="M44.999 76.917c-9.362 0-16.402-4.887-20.165-14.118a39.937 39.937 0 0 1-2.715-12.208l3.745-.243a36.548 36.548 0 0 0 2.434 11.028c3.183 7.827 8.8 11.796 16.7 11.796 18.912 0 19.192-21.57 19.192-22.468V25.109L45 17.376 25.807 25.11v14.829h-3.744V23.836a1.872 1.872 0 0 1 1.18-1.742l21.063-8.481a1.872 1.872 0 0 1 1.386 0l21.063 8.481a1.872 1.872 0 0 1 1.18 1.742v26.85c0 .261-.262 26.23-22.936 26.23z"></path><path d="M44.999 68.828c-12.657 0-15.765-16.42-15.878-17.113a2.06 2.06 0 0 1 0-.337v-.918h3.745v.73c.318 1.517 3.183 13.893 12.17 13.893 8.988 0 11.815-12.395 12.133-13.892V31.419L45 26.476l-12.17 4.887v8.519h-3.745V30.22a1.872 1.872 0 0 1 1.18-1.74l14.042-5.618a1.872 1.872 0 0 1 1.386 0l14.042 5.617a1.872 1.872 0 0 1 1.18 1.741v21.158a2.06 2.06 0 0 1 0 .337c-.15.693-3.258 17.113-15.915 17.113Z"></path><path d="M45 90a45 45 0 1 1 45-45 45.038 45.038 0 0 1-45 45Zm0-86.17A41.17 41.17 0 1 0 86.17 45 41.209 41.209 0 0 0 45 3.83Z"></path><path d="m41.048 55.291-2.64-2.603 7.49-7.489-7.49-7.49 2.64-2.64 8.782 8.763a1.872 1.872 0 0 1 0 2.659z"></path><path d="M9.893 43.327h38.626v3.745H9.893z"></path><circle cx="45" cy="45" r="42" opacity=".05"></circle></g></svg></g></g><g><g id="f49c5361-e7e4-48b8-8e9d-42170de13529"><svg x="1058" y="968" width="90" height="90"><g fill="#693cc5"><path d="M44.999 76.917c-9.362 0-16.402-4.887-20.165-14.118a39.937 39.937 0 0 1-2.715-12.208l3.745-.243a36.548 36.548 0 0 0 2.434 11.028c3.183 7.827 8.8 11.796 16.7 11.796 18.912 0 19.192-21.57 19.192-22.468V25.109L45 17.376 25.807 25.11v14.829h-3.744V23.836a1.872 1.872 0 0 1 1.18-1.742l21.063-8.481a1.872 1.872 0 0 1 1.386 0l21.063 8.481a1.872 1.872 0 0 1 1.18 1.742v26.85c0 .261-.262 26.23-22.936 26.23z"></path><path d="M44.999 68.828c-12.657 0-15.765-16.42-15.878-17.113a2.06 2.06 0 0 1 0-.337v-.918h3.745v.73c.318 1.517 3.183 13.893 12.17 13.893 8.988 0 11.815-12.395 12.133-13.892V31.419L45 26.476l-12.17 4.887v8.519h-3.745V30.22a1.872 1.872 0 0 1 1.18-1.74l14.042-5.618a1.872 1.872 0 0 1 1.386 0l14.042 5.617a1.872 1.872 0 0 1 1.18 1.741v21.158a2.06 2.06 0 0 1 0 .337c-.15.693-3.258 17.113-15.915 17.113Z"></path><path d="M45 90a45 45 0 1 1 45-45 45.038 45.038 0 0 1-45 45Zm0-86.17A41.17 41.17 0 1 0 86.17 45 41.209 41.209 0 0 0 45 3.83Z"></path><path d="m41.048 55.291-2.64-2.603 7.49-7.489-7.49-7.49 2.64-2.64 8.782 8.763a1.872 1.872 0 0 1 0 2.659z"></path><path d="M9.893 43.327h38.626v3.745H9.893z"></path><circle cx="45" cy="45" r="42" opacity=".05"></circle></g></svg></g></g><g><g id="786e207f-9a42-43e2-b625-889dff01b2be"><svg x="788" y="1238" width="90" height="90"><g fill="#693cc5"><path d="M44.999 76.917c-9.362 0-16.402-4.887-20.165-14.118a39.937 39.937 0 0 1-2.715-12.208l3.745-.243a36.548 36.548 0 0 0 2.434 11.028c3.183 7.827 8.8 11.796 16.7 11.796 18.912 0 19.192-21.57 19.192-22.468V25.109L45 17.376 25.807 25.11v14.829h-3.744V23.836a1.872 1.872 0 0 1 1.18-1.742l21.063-8.481a1.872 1.872 0 0 1 1.386 0l21.063 8.481a1.872 1.872 0 0 1 1.18 1.742v26.85c0 .261-.262 26.23-22.936 26.23z"></path><path d="M44.999 68.828c-12.657 0-15.765-16.42-15.878-17.113a2.06 2.06 0 0 1 0-.337v-.918h3.745v.73c.318 1.517 3.183 13.893 12.17 13.893 8.988 0 11.815-12.395 12.133-13.892V31.419L45 26.476l-12.17 4.887v8.519h-3.745V30.22a1.872 1.872 0 0 1 1.18-1.74l14.042-5.618a1.872 1.872 0 0 1 1.386 0l14.042 5.617a1.872 1.872 0 0 1 1.18 1.741v21.158a2.06 2.06 0 0 1 0 .337c-.15.693-3.258 17.113-15.915 17.113Z"></path><path d="M45 90a45 45 0 1 1 45-45 45.038 45.038 0 0 1-45 45Zm0-86.17A41.17 41.17 0 1 0 86.17 45 41.209 41.209 0 0 0 45 3.83Z"></path><path d="m41.048 55.291-2.64-2.603 7.49-7.489-7.49-7.49 2.64-2.64 8.782 8.763a1.872 1.872 0 0 1 0 2.659z"></path><path d="M9.893 43.327h38.626v3.745H9.893z"></path><circle cx="45" cy="45" r="42" opacity=".05"></circle></g></svg></g></g><g><g id="380ee9cb-c8ed-43fe-99d0-2e973ea84db4"><svg x="23" y="1643" width="90" height="90"><g fill="#693cc5"><path d="M44.999 76.917c-9.362 0-16.402-4.887-20.165-14.118a39.937 39.937 0 0 1-2.715-12.208l3.745-.243a36.548 36.548 0 0 0 2.434 11.028c3.183 7.827 8.8 11.796 16.7 11.796 18.912 0 19.192-21.57 19.192-22.468V25.109L45 17.376 25.807 25.11v14.829h-3.744V23.836a1.872 1.872 0 0 1 1.18-1.742l21.063-8.481a1.872 1.872 0 0 1 1.386 0l21.063 8.481a1.872 1.872 0 0 1 1.18 1.742v26.85c0 .261-.262 26.23-22.936 26.23z"></path><path d="M44.999 68.828c-12.657 0-15.765-16.42-15.878-17.113a2.06 2.06 0 0 1 0-.337v-.918h3.745v.73c.318 1.517 3.183 13.893 12.17 13.893 8.988 0 11.815-12.395 12.133-13.892V31.419L45 26.476l-12.17 4.887v8.519h-3.745V30.22a1.872 1.872 0 0 1 1.18-1.74l14.042-5.618a1.872 1.872 0 0 1 1.386 0l14.042 5.617a1.872 1.872 0 0 1 1.18 1.741v21.158a2.06 2.06 0 0 1 0 .337c-.15.693-3.258 17.113-15.915 17.113Z"></path><path d="M45 90a45 45 0 1 1 45-45 45.038 45.038 0 0 1-45 45Zm0-86.17A41.17 41.17 0 1 0 86.17 45 41.209 41.209 0 0 0 45 3.83Z"></path><path d="m41.048 55.291-2.64-2.603 7.49-7.489-7.49-7.49 2.64-2.64 8.782 8.763a1.872 1.872 0 0 1 0 2.659z"></path><path d="M9.893 43.327h38.626v3.745H9.893z"></path><circle cx="45" cy="45" r="42" opacity=".05"></circle></g></svg></g></g></g><g pointer-events="auto"></g><g pointer-events="auto"></g><g pointer-events="auto"><g><g id="6e13cb2a-93ce-4b29-b0c9-352e44689bd1"><svg x="-41" y="1733" overflow="visible"><text stroke="#ffffff" stroke-width="4" font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="" xml:space="preserve"><tspan x="8" dy="0">s3-vpc-endpoint</tspan></text><text font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="" xml:space="preserve"><tspan x="8" dy="0">s3-vpc-endpoint</tspan></text></svg></g></g><g><g id="d60961ce-6d9d-48ad-a291-92c2218c5edf"><svg x="1365" y="632" overflow="visible"><text stroke="#ffffff" stroke-width="4" font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="" xml:space="preserve"><tspan x="8" dy="0">Keycloak internet gateway</tspan></text><text font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="" xml:space="preserve"><tspan x="8" dy="0">Keycloak internet gateway</tspan></text></svg></g></g><g><g id="49ea7107-e81e-4d2d-b0d8-61e4faceca08"><svg x="168" y="788" overflow="visible"><text stroke="#ffffff" stroke-width="4" font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="" xml:space="preserve"><tspan x="8" dy="0">Keycloak DB</tspan></text><text font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="" xml:space="preserve"><tspan x="8" dy="0">Keycloak DB</tspan></text></svg></g></g><g><g id="abae74be-0a59-454d-8a79-48fd0be5176a"><svg x="689" y="1328" overflow="visible"><text stroke="#ffffff" stroke-width="4" font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="" xml:space="preserve"><tspan x="8" dy="0">ecr-dkr-vpc-endpoint</tspan></text><text font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="" xml:space="preserve"><tspan x="8" dy="0">ecr-dkr-vpc-endpoint</tspan></text></svg></g></g><g><g id="ded2d6fb-74fc-49b5-b951-8c27d00fb6fe"><svg x="791" y="158" overflow="visible"><text stroke="#ffffff" stroke-width="4" font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="" xml:space="preserve"><tspan x="8" dy="0">keycloak-alb</tspan></text><text font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="" xml:space="preserve"><tspan x="8" dy="0">keycloak-alb</tspan></text></svg></g></g><g><g id="f784eeca-d436-4b9d-8a17-9f778368a7d4"><svg x="959" y="788" overflow="visible"><text stroke="#ffffff" stroke-width="4" font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="" xml:space="preserve"><tspan x="8" dy="0">ecr-api-vpc-endpoint</tspan></text><text font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="" xml:space="preserve"><tspan x="8" dy="0">ecr-api-vpc-endpoint</tspan></text></svg></g></g><g><g id="ce62faa7-ad7e-41fc-ad5c-9d14bbb43fdb"><svg x="937" y="1058" overflow="visible"><text stroke="#ffffff" stroke-width="4" font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="" xml:space="preserve"><tspan x="8" dy="0">cloudwatch-vpc-endpoint</tspan></text><text font-family="Open Sans" y="26.24" font-size="16pt" fill="#000000" font-weight="bold" transform="" xml:space="preserve"><tspan x="8" dy="0">cloudwatch-vpc-endpoint</tspan></text></svg></g></g></g></g></svg>ture (10).svg…]()


The network consists on 3 subnets. One public subnet for load balancer and two private subnets for the ecs, and database instances respectively. The load balancer forwards all HTTP requests made by the user to port 8080 of the Keycloak ECS instance. 

The ECS instance is not connected to the internet but rather only accepts HTTP requests on 8080 from the load balancer. It also connects to the DB instances and the VPC endpoints to enable it access to ECR and CloudWatch Logs. The ECS instance is managed by AWS via AWS Farget and is governed by an autoscaling group that can be scale up and down based on CPU utilisation.
   
